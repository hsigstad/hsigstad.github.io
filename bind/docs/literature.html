<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Literature — The Binding Force of Law</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
<style>
  :root {
    --bg: #f8f9fa; --card: #fff; --fg: #1a1a1a; --muted: #666;
    --border: #dee2e6; --accent: #0d6efd; --accent2: #198754;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg); color: var(--fg); line-height: 1.5;
  }

  main {
    padding: 1.5rem 2rem 3rem; max-width: 900px; margin: 0 auto;
  }

  /* Markdown body styles */
  .md-body { font-size: .92rem; line-height: 1.7; color: #1f2328; }

  .md-body h1 { font-size: 1.5rem; font-weight: 600; margin: 1.8rem 0 .8rem; padding-bottom: .3rem; border-bottom: 1px solid var(--border); }
  .md-body h2 { font-size: 1.25rem; font-weight: 600; margin: 1.6rem 0 .6rem; padding-bottom: .25rem; border-bottom: 1px solid var(--border); }
  .md-body h3 { font-size: 1.05rem; font-weight: 600; margin: 1.3rem 0 .5rem; }
  .md-body h4 { font-size: .95rem; font-weight: 600; margin: 1.1rem 0 .4rem; }
  .md-body h5, .md-body h6 { font-size: .88rem; font-weight: 600; margin: 1rem 0 .4rem; }
  .md-body h1:first-child { margin-top: 0; }

  .md-body p { margin: 0 0 .8rem; }

  .md-body ul, .md-body ol { margin: 0 0 .8rem; padding-left: 1.8rem; }
  .md-body li { margin-bottom: .25rem; }
  .md-body li > ul, .md-body li > ol { margin-top: .25rem; margin-bottom: 0; }

  /* Task lists */
  .md-body ul li { list-style: disc; }
  .md-body li input[type="checkbox"] {
    margin-right: .4rem; vertical-align: middle; position: relative; top: -1px;
  }

  .md-body a { color: var(--accent); text-decoration: none; }
  .md-body a:hover { text-decoration: underline; }

  .md-body strong { font-weight: 600; }

  .md-body blockquote {
    margin: 0 0 .8rem; padding: .4rem 1rem;
    border-left: 4px solid var(--accent); background: #f0f4f8;
    color: #555; font-size: .88rem;
  }
  .md-body blockquote p:last-child { margin-bottom: 0; }

  .md-body code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    font-size: .85em; background: #eef1f5; padding: .15rem .35rem;
    border-radius: 4px;
  }
  .md-body pre {
    margin: 0 0 .8rem; padding: .9rem 1rem;
    background: #f6f8fa; border: 1px solid var(--border);
    border-radius: 6px; overflow-x: auto; line-height: 1.45;
  }
  .md-body pre code {
    background: none; padding: 0; font-size: .82rem;
  }

  .md-body table {
    width: 100%; border-collapse: collapse; margin: 0 0 .8rem;
    font-size: .85rem; display: block; overflow-x: auto;
  }
  .md-body th, .md-body td {
    padding: .45rem .7rem; border: 1px solid var(--border); text-align: left;
  }
  .md-body th { background: #f0f4f8; font-weight: 600; }
  .md-body tr:nth-child(even) td { background: #fafbfc; }

  .md-body hr {
    border: none; border-top: 1px solid var(--border); margin: 1.5rem 0;
  }

  .md-body img { max-width: 100%; }

  /* Collapsible sections */
  .doc-controls { margin-bottom: 1rem; }
  .doc-controls button {
    font-size: .8rem; padding: .3rem .7rem; cursor: pointer;
    background: var(--card); border: 1px solid var(--border); border-radius: 4px;
    color: var(--accent); font-weight: 600;
  }
  .doc-controls button:hover { background: #e7f1ff; }
  .md-body details { margin-bottom: .5rem; }
  .md-body details summary {
    font-weight: 600; cursor: pointer; list-style: none;
  }
  .md-body details summary::-webkit-details-marker { display: none; }
  .md-body details summary::before {
    content: "\25b6"; font-size: .7em; margin-right: .5rem;
    display: inline-block; transition: transform .15s;
  }
  .md-body details[open] summary::before { transform: rotate(90deg); }
  .md-body details.level-2 > summary {
    font-size: 1.25rem; padding-bottom: .25rem;
    border-bottom: 1px solid var(--border); margin: 1.6rem 0 .6rem;
  }
  .md-body details.level-3 > summary {
    font-size: 1.05rem; margin: 1.3rem 0 .5rem;
  }

  footer {
    text-align: center; padding: 1.5rem; font-size: .8rem; color: var(--muted);
    border-top: 1px solid var(--border); margin-top: 2rem;
  }
</style>
</head>
<body>

<style>
  .site-nav {
    position: sticky; top: 0; z-index: 100;
    background: #212529; display: flex; align-items: center;
    padding: 0 2rem; height: 3rem;
  }
  .site-nav .nav-brand {
    color: #fff; text-decoration: none; font-weight: 600; font-size: 1rem;
    margin-right: auto;
  }
  .site-nav .nav-brand:hover { color: #e9ecef; }
  .site-nav .nav-link {
    color: #adb5bd; text-decoration: none; font-size: .85rem;
    padding: 0 .75rem; height: 3rem; display: flex; align-items: center;
    background: none; border: none; cursor: pointer; font-family: inherit;
  }
  .site-nav .nav-link:hover, .site-nav .nav-link.active { color: #fff; }
  .nav-dropdown { position: relative; }
  .dropdown-menu {
    display: none; position: absolute; top: 3rem; right: 0;
    background: #fff; border: 1px solid var(--border); border-radius: 6px;
    box-shadow: 0 4px 16px rgba(0,0,0,.12); min-width: 220px;
    padding: .4rem 0; z-index: 200; max-height: 80vh; overflow-y: auto;
  }
  .nav-dropdown.open .dropdown-menu { display: block; }
  .dropdown-menu a {
    display: block; padding: .3rem 1rem; color: #1a1a1a;
    text-decoration: none; font-size: .82rem;
  }
  .dropdown-menu a:hover { background: #f0f4f8; }
  .dropdown-group-label {
    padding: .4rem 1rem .15rem; font-size: .68rem; font-weight: 700;
    color: #888; text-transform: uppercase; letter-spacing: .04em;
  }
  .dropdown-divider { border-top: 1px solid #eee; margin: .3rem 0; }
  .page-header {
    padding: .8rem 2rem; border-bottom: 1px solid var(--border); background: #fff;
  }
  .page-header h1 { font-size: 1.3rem; font-weight: 600; }
  .page-header p { color: var(--muted); font-size: .85rem; margin-top: .15rem; }
</style>

<nav class="site-nav">
  <a href="../index.html" class="nav-brand">The Binding Force of Law</a>
  <a href="../index.html" class="nav-link">Home</a>
  <a href="../paper/index.html" class="nav-link">Paper</a>
  <div class="nav-dropdown">
    <button class="nav-link active">Docs &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Reference</div>
    <a href="../docs/summary.html">Research Summary</a>
    <a href="../docs/institutions.html">Institutional Background</a>
    <a href="../docs/data.html">Data & Extractions</a>
    <a href="../docs/methods.html">Formal Model</a>
    <a href="../docs/literature.html">Literature</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Working notes</div>
    <a href="../docs/thinking.html">Open Questions & Ideas</a>
    <a href="../docs/decisions.html">Key Decisions</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Tasks</div>
    <a href="../docs/todo.html">Active Tasks</a>
    <a href="../docs/done.html">Completed Tasks</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Communication</div>
    <a href="../docs/meetings.html">Meeting Notes</a>
    <a href="../docs/feedback.html">External Feedback</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link">Briefs &#9662;</button>
    <div class="dropdown-menu">
    <a href="../briefs/holding-formalization.html">Decision brief: How to formalize holdings</a>
    <a href="../briefs/paper-status.html">Decision brief: Paper status and path to submission</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link">Cases &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Equal Protection</div>
    <a href="../cases/carolene_products_1938.html">United States v. Carolene Products Co.</a>
    <a href="../cases/korematsu_1944.html">Korematsu v. United States</a>
    <a href="../cases/brown_v_board_1954.html">Brown v. Board of Education</a>
    <a href="../cases/loving_v_virginia_1967.html">Loving v. Virginia</a>
    <a href="../cases/reed_v_reed_1971.html">Reed v. Reed</a>
    <a href="../cases/craig_v_boren_1976.html">Craig v. Boren</a>
    <a href="../cases/washington_v_davis_1976.html">Washington v. Davis</a>
    <a href="../cases/arlington_heights_1977.html">Village of Arlington Heights v. Metropolitan Housing Development Corp.</a>
    <a href="../cases/feeney_1979.html">Personnel Administrator of Massachusetts v. Feeney</a>
    <a href="../cases/cleburne_1985.html">City of Cleburne v. Cleburne Living Center, Inc.</a>
    <a href="../cases/adarand_1995.html">Adarand Constructors, Inc. v. Pena</a>
    <a href="../cases/romer_v_evans_1996.html">Romer v. Evans</a>
    <a href="../cases/us_v_virginia_vmi_1996.html">United States v. Virginia</a>
    <a href="../cases/grutter_2003.html">Grutter v. Bollinger</a>
    <a href="../cases/parents_involved_2007.html">Parents Involved in Community Schools v. Seattle School District No. 1</a>
    <a href="../cases/fisher_i_2013.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/fisher_ii_2016.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/sffa_2023.html">Students for Fair Admissions, Inc. v. President and Fellows of Harvard College</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Due Process</div>
    <a href="../cases/lochner_1905.html">Lochner v. New York</a>
    <a href="../cases/griswold_1965.html">Griswold v. Connecticut</a>
    <a href="../cases/roe_v_wade_1973.html">Roe v. Wade</a>
    <a href="../cases/mathews_v_eldridge_1976.html">Mathews v. Eldridge</a>
    <a href="../cases/casey_1992.html">Planned Parenthood of Southeastern Pennsylvania v. Casey</a>
    <a href="../cases/glucksberg_1997.html">Washington v. Glucksberg</a>
    <a href="../cases/dobbs_2022.html">Dobbs v. Jackson Women's Health Organization</a>
    </div>
  </div>
</nav>
<script>
document.querySelectorAll('.nav-dropdown > .nav-link').forEach(function(btn) {
  btn.addEventListener('click', function(e) {
    e.stopPropagation();
    var dd = btn.parentElement;
    var wasOpen = dd.classList.contains('open');
    document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
    if (!wasOpen) dd.classList.add('open');
  });
});
document.addEventListener('click', function() {
  document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
});
</script>

<div class="page-header">
  <h1>Literature</h1>
</div>

<main>
<div class="doc-controls">
  <button id="toggle-sections">Expand all</button>
</div>
<div class="md-body">
<h1>Literature</h1>
<h2 id="foundational-positioning">Foundational positioning</h2>
<ul>
<li><p>Schelling (1960)</p>
<ul>
<li>topic: focal points and coordination</li>
<li>relevance: foundational idea that law serves as a focal point for judicial coordination</li>
</ul>
</li>
<li><p>McAdams</p>
<ul>
<li>topic: expressive law and focal points</li>
<li>relevance: develops Schelling's insight for legal settings; this paper aims to go further by explaining how the focal point is created, sustained, and improved</li>
</ul>
</li>
<li><p>Segal &amp; Spaeth (attitudinal model)</p>
<ul>
<li>topic: ideology as the primary driver of judicial decisions</li>
<li>relevance: our model nests the attitudinal model as a special case when the feasible set is large (underdetermined law)</li>
</ul>
</li>
<li><p>Epstein &amp; Knight (strategic model)</p>
<ul>
<li>topic: judicial strategy and interdependence among judges</li>
<li>relevance: our model adds holdings as strategic instruments shaping future doctrine</li>
</ul>
</li>
<li><p>Hart, H.L.A. — &quot;The Concept of Law&quot; / &quot;no vehicles in the park&quot;</p>
<ul>
<li>topic: open texture of legal language; core of settled meaning plus penumbra of uncertainty</li>
<li>relevance: our feasible set of admissible rules corresponds to Hart's penumbra; multiple outcomes can be justified by the letter of prior law; foundational justification for why judges must trade off precedent-fit with other factors (discussed Oct 20)</li>
</ul>
</li>
<li><p>Dworkin — &quot;Law's Empire&quot; / chain novel theory</p>
<ul>
<li>topic: adjudication as continuation of a chain novel; each judge writes the next chapter but must be coherent with what came before; multiple principled interpretations can fit the same past decisions</li>
<li>relevance: our admissible set is the set of all interpretations that achieve sufficient &quot;fit&quot;; judges choose from it by injecting ideology or simplicity preference, as Dworkin's judge would choose the best substantive justification (discussed Oct 20)</li>
</ul>
</li>
<li><p>Kennedy, Duncan — &quot;A Critique of Adjudication&quot;</p>
<ul>
<li>topic: legal indeterminacy and the work required to deviate from accepted meaning</li>
<li>relevance: &quot;you need to do work to get away from the accepted meaning; you cannot just cite another judge&quot; (discussed Oct 20)</li>
</ul>
</li>
</ul>
<h2 id="formal-models-of-precedent-and-case-law">Formal models of precedent and case law</h2>
<ul>
<li><p>Gennaioli &amp; Shleifer (JPE 2007)</p>
<ul>
<li>topic: evolution of common law</li>
<li>relevance: postulates law is known but judges can change it at a cost; distinguishing leads to gradual convergence, overruling causes oscillation; our model differs by building on inherent ambiguity of law (feasible set rather than known rule)</li>
</ul>
</li>
<li><p>Fernandez &amp; Ponzetto (JLEO 2012)</p>
<ul>
<li>topic: stare decisis — rhetoric and substance</li>
<li>relevance: intermediate adherence to precedent leads to gradual legal shifts (not wild swings); aligns with our premise that precedent has binding force yet leaves a range of choice; contrasted with Holger's ambiguity-based approach</li>
</ul>
</li>
<li><p>Niblett, Posner &amp; Shleifer (2010) — &quot;The Evolution of a Legal Rule,&quot; J. Legal Studies</p>
<ul>
<li>link: https://papers.ssrn.com/sol3/papers.cfm?abstract_id=1665184</li>
<li>topic: model of case law evolution; judges choose broader or narrower holdings affecting pace of legal change</li>
<li>relevance: Holger noted our base model is essentially Niblett's; one-dimensional case law evolution with judge decisions and precedent; holding breadth maps to our linear constraint breadth (broad = stronger constraint, narrow = more future discretion)</li>
</ul>
</li>
<li><p>Cameron, Kornhauser &amp; Parameswaran (2019) — &quot;Stare Decisis and Judicial Log-Rolls,&quot; RAND J. Econ.</p>
<ul>
<li>topic: how horizontal stare decisis can be sustained among ideologically diverse judges through implicit cross-case trades</li>
<li>relevance: explains why polarized benches might still follow precedent — it is a mutually beneficial &quot;truce&quot;; judges choose dispositions, not rules — a rule emerges when heterogeneous judges each individually choose the same rule; &quot;the legal literature disagrees about what in the prior decision 'binds' the judge: the disposition, the announced rule, or the articulated reasons&quot;</li>
</ul>
</li>
<li><p>Baker &amp; Mezzetti (2012) — &quot;A Theory of Rational Jurisprudence,&quot; J. Political Economy</p>
<ul>
<li>topic: dynamic model of judge-made law under uncertainty; court follows precedent and decides new cases by analogy</li>
<li>relevance: endogenously produces analogical reasoning as optimal; connects to our idea that judges adhere to precedent as a constraint while exercising discretion in novel fact scenarios</li>
</ul>
</li>
<li><p>Callander &amp; Clark (2017) — &quot;Precedent and Doctrine in a Complicated World,&quot; APSR</p>
<ul>
<li>topic: game-theoretic model of judicial learning in multi-dimensional fact space; higher court develops doctrine from limited cases</li>
<li>relevance: closest competitor/complement — models precedent as progressively shrinking a feasible set in a complex fact space, leading to path-dependent evolution; our model distinguishes itself by formalizing holdings as linear constraints and explicitly accounting for judges' ideological utility</li>
</ul>
</li>
<li><p>Fox &amp; Vanberg (2014) — &quot;Narrow versus Broad Judicial Decisions,&quot; J. Theoretical Politics</p>
<ul>
<li>topic: whether judges should craft narrow or broad rulings; challenges &quot;judicial minimalism&quot; by showing broad rules can be optimal under ignorance</li>
<li>relevance: directly relevant to our citation-incentives / breadth tradeoff; judges influence which cases arise later through holding breadth; connects to endogenous bright-line emergence in EP application</li>
</ul>
</li>
<li><p>Cameron &amp; Kornhauser (2005) — &quot;Modeling Collegial Courts I &amp; II&quot;</p>
<ul>
<li>topic: formal models of how multi-judge courts produce decisions and doctrines; majority coalitions and opinion-writing strategy</li>
<li>relevance: need to keep a majority can lead to narrower holdings than any judge individually prefers; explains why doctrine usually evolves incrementally; median-driven dynamics reinforce path dependence; regime shifts occur when medians shift</li>
</ul>
</li>
</ul>
<h2 id="ai-amp-law-case-space-models-with-explicit-outcome-rationale-separation">AI &amp; Law: case-space models with explicit outcome/rationale separation</h2>
<p>This tradition is the closest formal predecessor to our model. Cases are vectors of factors/dimensions, doctrine is a classifier or decision boundary, and — crucially — the binding content is in the rationale (which factors/dimensions are treated as decisive), not just the outcome label. Our contribution relative to this tradition: continuous geometry (linear constraints on affine rules in R^k) rather than discrete factor orderings; explicit judicial utility with ideology, sanctions, and citation incentives; dynamic feasible-set evolution with overruling.</p>
<ul>
<li><p>Ashley &amp; Rissland (HYPO, 1980s–90s); Aleven &amp; Ashley (CATO, 2000s)</p>
<ul>
<li>topic: represent cases as vectors of legally salient factors; HYPO builds argumentation about which factors control outcomes; CATO models why a precedent applies or can be distinguished by identifying relevant factors and higher-level reasons</li>
<li>relevance: doctrine-as-classifier in factor space with explicit &quot;why&quot; beyond labels; closest AI &amp; Law precursor to our holdings-as-constraints idea; CATO's distinction/extension reasoning parallels our feasible-set narrowing/widening</li>
</ul>
</li>
<li><p>Bench-Capon &amp; Sartor (2003) — theory construction from cases</p>
<ul>
<li>topic: reasoning with cases as constructing and evaluating a theory (rules + values) that explains outcomes; cases described by factors/dimensions, doctrinal content is the theory that justifies and generalizes</li>
<li>relevance: directly separates outcome from holding/rationale; &quot;case outcomes constrain acceptable theories&quot; matches our &quot;holdings constrain admissible rules&quot;; the constructed theory generalizes beyond the instant case, as our linear constraints do</li>
</ul>
</li>
<li><p>Bench-Capon, Atkinson et al. — &quot;Dimensions&quot; programs</p>
<ul>
<li>topic: replace discrete factors with ordered dimensions (more/less of something legally relevant); yields a more geometrically natural boundary; explicitly about which regions of the space are controlled by which precedents</li>
<li>relevance: closest to our geometric approach within AI &amp; Law; ordered dimensions are a step toward our continuous R^k fact space; &quot;intermediate factors&quot; that matter for explanation even if binding constraint is defined at a lower level</li>
</ul>
</li>
<li><p>Prakken &amp; Sartor — logical reconstructions of case-based reasoning</p>
<ul>
<li>topic: reconstruct HYPO/CATO-style reasoning as generating defeasible rules (&quot;if these pro factors and not these con factors, then outcome&quot;); subsequent cases attack, distinguish, or defeat rules</li>
<li>relevance: our &quot;holding = linear constraint on rule parameters&quot; is a continuous analogue of &quot;case ⇒ defeasible rule&quot;; subsequent holdings refine which rules remain acceptable; the defeasibility maps to our overruling mechanism</li>
</ul>
</li>
<li><p>Clark &amp; Lauderdale (2010) — &quot;Locating Supreme Court Opinions in Policy Space&quot;</p>
<ul>
<li>topic: locate opinions and disputes in a spatial &quot;doctrine&quot; dimension using citation patterns and treatments of precedent</li>
<li>relevance: doctrine as structured geometry of positions; the rationale signal comes through how opinions relate to prior precedents (affirm/criticize); provides empirical methods for estimating our model's doctrine space from real data</li>
</ul>
</li>
<li><p>Branting (1993) — &quot;A Computational Model of Ratio Decidendi,&quot; AI &amp; Law 2(1): 1–31; also (1991) &quot;Reasoning with Portions of Precedents,&quot; ICAIL; (2003) &quot;A Reduction-Graph Model of Precedent,&quot; AI</p>
<ul>
<li>topic: explicit computational representation of ratio decidendi as a justification structure (chain/graph of reasoning steps linking abstract predicates and case-specific facts); a precedent's effect depends on the theory/justification under which it was decided, not merely the outcome; &quot;portions of precedents&quot; shows later cases combine selective parts of prior justifications</li>
<li>relevance: most direct predecessor to our &quot;outcome ≠ holding; holding constrains future rule choice&quot;; our linear-constraint holding is the geometric cousin of Branting's &quot;theory controls precedential effect&quot;; his reduction-graph (multiple interpretive theories per case) maps to our feasible set containing multiple admissible rules consistent with the same outcome</li>
</ul>
</li>
<li><p>Horty &amp; Bench-Capon (2012) — &quot;A Factor-Based Definition of Precedential Constraint&quot;</p>
<ul>
<li>topic: precise formal account of when precedent forces outcomes using factors/reasons pro/con each side; distinguishes minimalist &quot;result-model&quot; constraint from richer &quot;reason-model&quot; constraint; the ratio corresponds to a subset/structure of reasons that must be preserved</li>
<li>relevance: closest formal cousin to our admissible-set idea in reason-set rather than parameter-set space; &quot;binding content is in the reasons, not just the outcome&quot; parallels our &quot;holding constrains admissible (w,c), not just d&quot;; key difference: they use discrete reason sets, we use continuous linear constraints</li>
</ul>
</li>
<li><p>Rigoni (2015; 2018) — &quot;An Improved Factor-Based Approach to Precedential Constraint,&quot; AI &amp; Law; &quot;Representing Dimensions within the Reason Model,&quot; AI &amp; Law</p>
<ul>
<li>topic: refines reason-model to address edge cases; extends to ordered dimensions (magnitudes) showing how naive treatments collapse important distinctions; addresses how to keep ratio-level constraint from collapsing into mere outcome matching</li>
<li>relevance: dimensions with ordered magnitudes are where our hyperplane/threshold geometry is most naturally compared; Rigoni is working on the same &quot;what exactly binds?&quot; problem with different formal objects</li>
</ul>
</li>
<li><p>Prakken (2021) — &quot;A Formal Analysis of Some Factor- and Precedent-Based Accounts of Precedential Constraint,&quot; AI &amp; Law 29(4): 559–585</p>
<ul>
<li>topic: systematic comparison of leading formal accounts (result vs reason models, factor vs dimension extensions); highlights when they succeed/fail at capturing ratio vs dicta distinctions</li>
<li>relevance: useful for positioning our &quot;holding as constraint set&quot; as (i) addressing known collapse/identification issues in the literature and (ii) offering a cleaner geometric object (polytope over rule parameters) than some reason/dimension constructions</li>
</ul>
</li>
<li><p>van Woerkom, Verheij &amp; Prakken (2023) — &quot;Hierarchical Precedential Constraint,&quot; ICAIL '23; Prakken &amp; van Woerkom (2025) — &quot;Defending the Hierarchical Result Models,&quot; arXiv</p>
<ul>
<li>topic: generalizes precedential constraint to factor hierarchies with multi-step reasoning from base factors to intermediate factors to outcomes; holding can bind at different abstraction levels than the raw outcome</li>
<li>relevance: directly relevant to our entailment constraint — which projection of the fact space should the holding constrain?; hierarchies formalize the idea that &quot;what binds&quot; may live at a different explanatory level; our affine-rule constraints are implicitly a choice of abstraction level</li>
</ul>
</li>
</ul>
<h2 id="underdetermination-admissible-sets-and-legal-indeterminacy">Underdetermination, admissible sets, and legal indeterminacy</h2>
<ul>
<li><p>Re (2021) — &quot;Precedent as Permission,&quot; Texas Law Review</p>
<ul>
<li>topic: reconceptualizes precedent not primarily as constraint but as permission; distinguishes &quot;permissive aspect&quot; (enabling certain outcomes) from &quot;prohibitory aspect&quot; (forbidding departures)</li>
<li>relevance: directly informs our admissible-set concept; prior cases carve out a range of permissible rulings within which judges exercise choice; our notion that precedent &quot;shrinks&quot; the feasible set without collapsing it to a point is an application of Re's insight</li>
</ul>
</li>
<li><p>Horty (2004; 2019) — &quot;The Result Model of Precedent,&quot; Legal Theory; and related AI &amp; Law work</p>
<ul>
<li>topic: uses logic to capture precedent's indeterminacy; a precedent constrains future cases only when new facts are &quot;at least as strong&quot; for the winning side (a fortiori); defines rigorous ordering of case &quot;strength&quot;; hierarchical extensions formalize multi-level factor structures where the explanatory rationale may differ from the minimal constraint needed for correct precedential control</li>
<li>relevance: the result model's zones of determined outcomes vs. zones of indeterminacy mirror our feasible set approach; past case sets a boundary in fact-space beyond which outcomes are constrained, with freedom elsewhere; provides formal logic counterpart to our geometric framework; the hierarchical extensions connect to our entailment constraint (holding ≠ outcome)</li>
</ul>
</li>
<li><p>Alexander &amp; Sherwin (2008) — &quot;Demystifying Legal Reasoning&quot;</p>
<ul>
<li>topic: underdeterminacy — legal rules and past decisions often do not dictate a unique answer; &quot;constraint by precedent as a spectrum&quot; from heavily restrictive to merely suggestive</li>
<li>relevance: underscores that binding force is a matter of degree; each new holding tightens the hypothesis space but rarely to a singleton; our intersecting linear constraints formalize this spectrum of partial constraint</li>
</ul>
</li>
</ul>
<h2 id="rules-versus-standards">Rules versus standards</h2>
<ul>
<li><p>Kaplow (1992) — &quot;Rules Versus Standards: An Economic Analysis,&quot; Duke L.J.</p>
<ul>
<li>topic: rules (precisely defined ex ante) vs. standards (open-ended, applied ex post); rules costlier to promulgate but cheaper to apply</li>
<li>relevance: connects to endogenous bright-line emergence in our model; judges may convert standards into rules when uniformity benefits outweigh flexibility loss; EP application's shift from multi-factor balancing to tiered scrutiny can be understood through this lens</li>
</ul>
</li>
<li><p>Cross, Jacobi &amp; Tiller (2012) — &quot;A Positive Political Theory of Rules and Standards,&quot; U. Ill. L. Rev.</p>
<ul>
<li>topic: positive political theory of how courts choose between rules and standards; key factors: ideological alignment, case-fact distributions, institutional heterogeneity</li>
<li>relevance: in polarized environments, judges issue rigid rules to bind ideological opponents; supports our model's prediction that judges with strong ideology prefer bright-line holdings to minimize dilution by differently inclined colleagues</li>
</ul>
</li>
<li><p>Lax (2007, 2011) — series on &quot;political constraints on legal doctrine&quot;</p>
<ul>
<li>topic: Supreme Court strategically crafts doctrine anticipating lower court application; bright-line rule when fearing noncompliance, standard when trusting lower courts</li>
<li>relevance: our horizontal model is the single-court analog — a judge chooses broad holdings (rules) to constrain future panels that might be ideologically different; parallels our breadth tradeoff</li>
</ul>
</li>
<li><p>Schauer (1991) — &quot;Playing by the Rules&quot;</p>
<ul>
<li>topic: why legal systems employ rules despite over- and under-inclusiveness; rules cabin discretion and lead to consistency; but strict rules produce hard cases and pressure for exceptions</li>
<li>relevance: captures the interplay our model generates — judges oscillate between creating rules for clarity and carving out exceptions for fairness, producing doctrinal drift</li>
</ul>
</li>
</ul>
<h2 id="judicial-coordination-and-norm-enforcement">Judicial coordination and norm enforcement</h2>
<ul>
<li><p>Kornhauser (1989) — &quot;An Economic Perspective on Stare Decisis,&quot; Chi.-Kent L. Rev.</p>
<ul>
<li>topic: why judges follow precedent absent external enforcement; coordination value of precedent as a Schelling focal point; precedents create a framework within which judges operate</li>
<li>relevance: recommended by Holger (Dec 9); reinforces that precedent is a self-enforcing equilibrium constraint allowing strategic maneuvering; our judges' &quot;precedent-fit&quot; objective captures this coordination value</li>
</ul>
</li>
<li><p>Landes &amp; Posner (1976) — &quot;Legal Precedent: A Theoretical and Empirical Analysis,&quot; J. Law &amp; Econ.</p>
<ul>
<li>topic: body of precedents as capital stock yielding benefits (predictability) that depreciates over time; judges &quot;invest&quot; by creating clear precedents</li>
<li>relevance: even self-interested judges have long-term interest in upholding precedent to preserve legal capital; our judges adding constraints invest in clarity; distinguishing/overruling acknowledges depreciation; regime shifts are capital replacement</li>
</ul>
</li>
<li><p>Bueno de Mesquita &amp; Stephenson (2002) — &quot;Informative Precedent and Intrajudicial Communication,&quot; APSR</p>
<ul>
<li>topic: how courts use opinions and precedent to communicate information and instructions</li>
<li>relevance: a judge's choice of bright-line holding vs. ambiguous one is a communication device to peers; connects to our breadth choice as signaling to future panels</li>
</ul>
</li>
<li><p>Sagua &amp; Wolitzky (JPE 2018)</p>
<ul>
<li>topic: first attempt to investigate whether transparency facilitates collusion</li>
<li>relevance: private monitoring in cartels; possible connection to judicial monitoring and norm enforcement (discussed Oct 16)</li>
</ul>
</li>
</ul>
<h2 id="ideology-and-judicial-behavior-empirical">Ideology and judicial behavior (empirical)</h2>
<ul>
<li><p>Brown &amp; Epstein (2023)</p>
<ul>
<li>topic: US Supreme Court voting patterns and presidential loyalty</li>
<li>relevance: Roberts Court as most &quot;anti-president&quot; court; partisan and loyalty bias; judicial supremacy</li>
</ul>
</li>
<li><p>Epstein &amp; Posner (2016)</p>
<ul>
<li>topic: Supreme Court justices' loyalty to the appointing president</li>
<li>relevance: original empirical study this project grew out of; loyalty replication now archived</li>
</ul>
</li>
<li><p>Sunstein, Schkade &amp; Ellman (2004) — &quot;Ideological Voting on Federal Courts of Appeals,&quot; Va. L. Rev.</p>
<ul>
<li>topic: judges' political ideologies strongly influence outcomes; panel effects (mixed panels moderate, unified panels amplify ideology)</li>
<li>relevance: motivates our assumption that judges have ideal points they pursue; precedent channels ideology without eliminating it; panel composition changes produce different collective outcomes, which our path dependence captures</li>
</ul>
</li>
<li><p>Lindquist &amp; Cross (2005) — &quot;Empirically Testing Dworkin's Chain Novel,&quot; NYU L. Rev.</p>
<ul>
<li>topic: how precedent's constraining force evolves as case law grows; in early cases ideology dominates, then precedent constrains more, but past a threshold more precedent makes it easier for judges to find support for preferred outcomes</li>
<li>relevance: striking confirmation of our model — constraint peaks then diminishes as the feasible set grows rich enough for judges to selectively cite; too much precedent creates ambiguity; directly supports our notions of doctrine drift and selective distinguishing</li>
</ul>
</li>
</ul>
<h2 id="empirical-measurement-of-doctrinal-constraint-proxies-for-admissible-set-size">Empirical measurement of doctrinal constraint (proxies for admissible-set size)</h2>
<p>No existing work measures a literal admissible set, but several traditions approximate it. The model predicts: large admissible set → more disagreement, lower predictability, wider semantic dispersion; small set → convergence, predictability, rigidity. Key proxy families:</p>
<p><strong>Disagreement-based:</strong> dissent rates, vote splits (2-1 vs 3-0), en banc fragmentation. Dissent rate ≈ width of feasible rule set.</p>
<p><strong>Predictability-based:</strong> ML accuracy, classification entropy, outcome entropy conditional on facts. Prediction difficulty ≈ diameter of admissible set.</p>
<p><strong>Variance decomposition:</strong> random judge assignment isolates how much judge identity explains outcomes after controlling for facts/precedent. Large judge effects → doctrine leaves room for choice.</p>
<p><strong>Citation structure:</strong> precedent centrality (PageRank), citation dispersion, negative treatment frequency, citation half-life. Dense reliance on few precedents → narrow set; frequent distinguishing → constraint relaxation.</p>
<p><strong>Semantic:</strong> embedding-based dispersion of opinions on similar issues; tight clusters → narrow set. Drift of key terms (&quot;undue burden,&quot; &quot;strict scrutiny&quot;) over time.</p>
<ul>
<li><p>Epstein, Landes &amp; Posner (2011) — &quot;Why (and When) Judges Dissent&quot;</p>
<ul>
<li>topic: when and why judges dissent; dissents increase with ambiguity and stakes</li>
<li>relevance: dissent rates as direct proxy for admissible-set width; low dissent → narrow feasible set, high dissent → many defensible outcomes</li>
</ul>
</li>
<li><p>Sunstein et al. (2006) — &quot;Are Judges Political? An Empirical Analysis of the Federal Judiciary&quot;</p>
<ul>
<li>topic: comprehensive empirical study of ideology and panel effects across case types</li>
<li>relevance: extends the 2004 paper; shows doctrine sometimes leaves room for competing interpretations even on mixed panels; variation across legal domains proxies for variation in admissible-set size</li>
</ul>
</li>
<li><p>Fowler et al. (2007) — &quot;Network Analysis of the Supreme Court&quot;</p>
<ul>
<li>topic: citation network structure; identifies hub precedents using PageRank and authority scores</li>
<li>relevance: central precedents = binding constraints in our model; citation dispersion indicates doctrinal openness; network structure could proxy for constraint geometry</li>
</ul>
</li>
<li><p>Random judge assignment studies (Kling; Chen &amp; Yeh; Iaryczower &amp; Shum)</p>
<ul>
<li>topic: exploit random assignment of judges to cases to identify causal effect of judge identity on outcomes</li>
<li>relevance: cleanest identification strategy for admissible-set size — if judge identity explains outcome variance after controlling for case features, the residual = discretion within feasible set; directly tests our prediction that ideology matters more when doctrine is unsettled</li>
</ul>
</li>
<li><p>Medvedeva, Vols &amp; Wieling (2020) — ECtHR case outcome prediction</p>
<ul>
<li>topic: ML prediction of European Court of Human Rights outcomes; prediction difficulty varies across legal domains</li>
<li>relevance: cross-domain variation in predictability maps to cross-domain variation in admissible-set size; some doctrines far less determinate than others</li>
</ul>
</li>
<li><p>Livermore &amp; Rockmore (2019) — computational analysis of semantic drift in judicial opinions</p>
<ul>
<li>topic: NLP methods tracking how meaning of legal terms and reasoning patterns shift over time</li>
<li>relevance: semantic drift ≈ movement of feasible set center; dispersion of opinion embeddings ≈ volume of admissible set; tools for measuring our model's doctrinal drift empirically</li>
</ul>
</li>
</ul>
<h2 id="path-dependence-and-regime-shifts">Path dependence and regime shifts</h2>
<ul>
<li><p>Hathaway (2001) — &quot;Path Dependence in the Law,&quot; Iowa L. Rev.</p>
<ul>
<li>topic: three mechanisms of legal path dependence: increasing returns (costlier to deviate from established rules), evolutionary/adaptive (early cases set direction), and sequencing (early contingent events lead law down one of multiple paths)</li>
<li>relevance: directly mirrors our model — order of fact patterns and ideology of deciding judges lead to different doctrinal endpoints from same legal principles; overruling costs increase as doctrine becomes established; regime shifts occur when accumulated pressures break the path</li>
</ul>
</li>
<li><p>Spriggs &amp; Hansford (2001) — &quot;Explaining the Overruling of U.S. Supreme Court Precedent,&quot; AJPS</p>
<ul>
<li>topic: empirical predictors of overruling — ideological distance between current and precedent-setting Court, negative subsequent treatments, doctrinal confusion</li>
<li>relevance: supports our model's overruling mechanism; distinguishing erodes precedent force until formal overruling is almost a formality; their thresholds for overruling inform our parameter choices</li>
</ul>
</li>
</ul>
<h2 id="holdings-definition-and-scope">Holdings: definition and scope</h2>
<ul>
<li>Stearns &amp; Abramowicz (2005) — &quot;Defining Dicta,&quot; 57 Stan. L. Rev. 953<ul>
<li>topic: rigorous definition of holding vs. dicta; holding = propositions along the chosen reasoning path that are actually decided, based on case facts, leading to the judgment</li>
<li>relevance: justifies our treatment of holdings as extractable constraints; the breadth of a holding is partly in the opinion author's hands; later courts may dispute it by calling statements dicta; our distinguishing mechanism captures this contestability</li>
</ul>
</li>
</ul>
<h2 id="prediction-and-model-selection">Prediction and model selection</h2>
<ul>
<li><p>Katz, Bommarito &amp; Blackman (2017) — &quot;A General Approach for Predicting the Behavior of the Supreme Court,&quot; PLOS ONE</p>
<ul>
<li>topic: ML prediction of Supreme Court outcomes (~70% accuracy); features include issue area, lower court, ideology scores</li>
<li>relevance: treats judging as a predictability problem, resonating with our hypothesis-class view of law; 70% success shows much is law-governed while 30% error leaves room for ideology and novel facts; unpredictable cases are those where feasible set is broad; judges in our model perform a kind of online learning</li>
</ul>
</li>
<li><p>Ruger et al. (2004) — &quot;The Supreme Court Forecasting Project,&quot; Columbia L. Rev.</p>
<ul>
<li>topic: statistical model slightly outperformed legal experts in predicting SCOTUS outcomes</li>
<li>relevance: validates that precedent defines the playing field (it is predictive because judges follow it); each precedent adds information / reduces entropy about future cases; our linear constraints are an information measure removing uncertainty</li>
</ul>
</li>
</ul>
<h2 id="slippery-slopes-and-doctrinal-drift">Slippery slopes and doctrinal drift</h2>
<ul>
<li>Volokh (2003) — &quot;Mechanisms of the Slippery Slope,&quot; Harv. L. Rev.<ul>
<li>topic: categorizes slippery slopes including precedent type (initial decision used to justify broader rules) and attitude type (attitudes shift after initial step, lowering resistance)</li>
<li>relevance: our model formally captures the precedent slippery slope — each holding becomes a constraint that can be extended; judges push slightly further next time, distinguishing the prior holding's limit; over time the threshold moves while each step cites continuity</li>
</ul>
</li>
</ul>
<h2 id="formal-analogues-from-learning-theory-and-optimization">Formal analogues from learning theory and optimization</h2>
<p>The model's core structure — a convex feasible set of admissible rules that shrinks via intersection with linear constraints as new observations arrive — has near-exact parallels in several literatures. These provide ready-made tools for comparative statics (how fast does doctrine rigidify? why do early precedents matter disproportionately?) and formal positioning for econ audiences.</p>
<ul>
<li><p>Mitchell (1977, 1982) — Version Spaces / Candidate Elimination Algorithm</p>
<ul>
<li>citation: Mitchell, T. (1977) &quot;Version Spaces: A Candidate Elimination Approach to Rule Learning,&quot; PhD Thesis, Stanford; (1982) &quot;Generalization as Search,&quot; Artificial Intelligence</li>
<li>topic: learner maintains set of hypotheses consistent with all labeled examples; each new example eliminates inconsistent hypotheses; when hypotheses are linear classifiers, version space is a polytope defined by linear inequalities</li>
<li>relevance: closest mathematical analogue — precedents = labeled examples, admissible legal rules = version space, new holdings = constraints shrinking the space; monotone shrinkage via intersection is identical to our F_{t+1} = F_t ∩ H_t; candidate elimination maintains upper/lower bounds, paralleling how doctrine narrows from both sides</li>
</ul>
</li>
<li><p>Kelley (1960) — Cutting Plane Methods</p>
<ul>
<li>citation: Kelley, J. (1960) &quot;The Cutting-Plane Method for Solving Convex Programs,&quot; J. SIAM</li>
<li>topic: iteratively add linear constraints (&quot;cuts&quot;) that exclude infeasible regions; feasible set = shrinking polytope</li>
<li>relevance: near one-to-one geometric match — each precedent = hyperplane cut in rule space, doctrine = intersection of cuts; provides convergence results and tools for analyzing how quickly the feasible set tightens</li>
</ul>
</li>
<li><p>Vapnik (1995) — Statistical Learning Theory / VC Dimension</p>
<ul>
<li>citation: Vapnik, V. (1995) &quot;The Nature of Statistical Learning Theory,&quot; Springer</li>
<li>topic: selecting functions from constrained hypothesis classes based on consistency + complexity penalties; VC dimension measures capacity of hypothesis class</li>
<li>relevance: mirrors our judges' tradeoff — fit precedent (training error), prefer simplicity (capacity control), ideology (bias); VC dimension could formalize &quot;how much doctrine can a given constraint language express&quot;; structural risk minimization = optimal holding breadth</li>
</ul>
</li>
<li><p>Set-Membership Estimation (Schweppe 1968; Milanese &amp; Vicino 1991)</p>
<ul>
<li>topic: unknown parameter vector belongs to feasible polytope; new observations impose linear constraints shrinking the polytope; used in robust control and system identification</li>
<li>relevance: direct structural analogue — unknown legal rule ≈ unknown parameter, holdings ≈ observations, admissible doctrines ≈ feasible parameter set; provides well-developed tools for analyzing polytope diameter, volume, and convergence rate; novel connection for law &amp; econ readers</li>
</ul>
</li>
<li><p>Convex body shrinkage / Center-of-Gravity methods (Grünbaum 1960; Bertsimas &amp; Vempala 2004)</p>
<ul>
<li>topic: each new hyperplane constraint reduces feasible volume by a constant fraction; used in active learning and online optimization</li>
<li>relevance: provides quantitative tools for binding force = volume reduction rate, why early precedents matter disproportionately (largest volume removed first), how overruling resets feasible volume; could give formal comparative statics on doctrinal rigidity over time</li>
</ul>
</li>
<li><p>Passive-Aggressive Algorithms (Crammer et al. 2006)</p>
<ul>
<li>citation: Crammer, K. et al. (2006) &quot;Online Passive-Aggressive Algorithms,&quot; JMLR</li>
<li>topic: minimal parameter update sufficient to satisfy new constraint; update magnitude proportional to constraint violation</li>
<li>relevance: &quot;minimal update consistent with new data&quot; parallels judicial minimalism — judges minimally adjust doctrine to accommodate new precedent; connects to our entailment constraint (holdings must be outcome-entailed, not more)</li>
</ul>
</li>
<li><p>List &amp; Pettit (2002+) — Judgment Aggregation</p>
<ul>
<li>topic: logical consistency constraints define admissible collective judgments; shows that majority voting can produce inconsistent collective judgment sets even from individually consistent ones (discursive dilemma)</li>
<li>relevance: multi-judge courts selecting doctrines consistent with prior commitments; feasible judgment sets as constraints on collective legal reasoning; potential formal tool for extending our model to panel decision-making</li>
</ul>
</li>
</ul>
<h2 id="explicit-bridges-learning-theory-applied-to-legal-doctrine">Explicit bridges: learning theory applied to legal doctrine</h2>
<p>These papers explicitly connect version spaces / learning theory to legal reasoning — not NLP prediction, but doctrine-as-learned-structure. The Rissland line (1986–2003) is the earliest prior art for our feasible-set framing. The newer papers (Hartline 2022, Dutz 2025) are the closest modern competitors. <strong>Key finding: no existing work uses continuous geometry (polytopes, cutting planes, linear constraints in R^k) for doctrine. The connection was noted using discrete/symbolic version spaces, but never developed with our affine-rule framework, judicial utility, or equilibrium analysis.</strong></p>
<ul>
<li><p>Rissland &amp; Collins (1986) — &quot;The Law as a Learning System&quot;</p>
<ul>
<li>topic: treats doctrinal development as a learning process; explicitly analyzes sequences of cases as training examples for Mitchell-style candidate elimination / version spaces; uses concrete doctrinal areas to illustrate how concepts/rules evolve</li>
<li>relevance: earliest explicit &quot;common law as version-space learning&quot; framing; must cite as conceptual predecessor; our model develops the geometric structure they sketch — continuous affine rules instead of discrete concepts, judicial utility instead of passive learning</li>
</ul>
</li>
<li><p>Rissland (1990) — &quot;Stepping Stones to a Model of Legal Reasoning&quot;</p>
<ul>
<li>topic: foundational AI &amp; Law piece connecting legal reasoning to learning and representation; explicitly references candidate elimination as part of how legal concepts are refined from examples</li>
<li>relevance: strengthens the Rissland lineage; &quot;how representation + learning interact in legal reasoning&quot; is essentially our question, formalized differently</li>
</ul>
</li>
<li><p>Ashley &amp; Rissland (2003) — &quot;Law, Learning and Representation,&quot; Artificial Intelligence</p>
<ul>
<li>topic: explicitly discusses legal learning/CBR in version-space terms; ties doctrinal change to search/refinement in a space of concepts</li>
<li>relevance: cleanest bridge text in mainstream AI journal form; &quot;doctrine as a learned structure constrained by cases, not merely a classifier trained for accuracy&quot; — this is exactly our framing; key distinction: they work with symbolic factor-based representations, we work with continuous linear constraints</li>
</ul>
</li>
<li><p>Hartline, Linna, Shan &amp; Tang (2022) — &quot;Algorithmic Learning Foundations for Common Law,&quot; arXiv / CSLaw</p>
<ul>
<li>topic: models common-law system explicitly as an online learning problem; information arrives through litigated cases; settlement prevents information revelation; focuses on whether/when the system &quot;learns&quot; efficiently given litigation incentives</li>
<li>relevance: rare modern formal &quot;common law as learning algorithm&quot; paper that engages institutional features (costs, case selection); complements our model by analyzing information aggregation where we analyze constraint accumulation; does not model holdings separately from outcomes</li>
</ul>
</li>
<li><p>Dutz, Shao, Blum &amp; Cohen (2025) — &quot;A Machine Learning Theory Perspective on Strategic Litigation,&quot; arXiv</p>
<ul>
<li>topic: cases as points in instance space; high court labels; lower court learns rule from precedent; strategic litigants &quot;teach&quot; by selecting cases to shape the learned rule; discusses overturning</li>
<li>relevance: very close in spirit — &quot;holdings as instruments&quot; formalized with learning-theory primitives; their strategic case selection maps to our citation incentives; key difference: they model the litigant-side teaching problem, we model the judge-side constraint problem with ideology and sanctions</li>
</ul>
</li>
</ul>
<h2 id="psychological-foundations">Psychological foundations</h2>
<ul>
<li><p>DeKay (2015)</p>
<ul>
<li>topic: predecisional information distortion and self-fulfilling prophecy of early preferences in choice</li>
<li>relevance: psychological foundation for own-side bias in legal interpretation (cited in Holger's project description)</li>
</ul>
</li>
<li><p>Russo (2015)</p>
<ul>
<li>topic: predecisional distortion of information</li>
<li>relevance: psychological foundation for biased signal interpretation by judges (cited in Holger's project description)</li>
</ul>
</li>
</ul>

</div>
</main>

<footer>
  Generated by <code>python3 -m source.site.build_all</code>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const body = document.querySelector('.md-body');
  if (!body) return;

  function foldHeadings(container, tag) {
    const level = tag.replace('H', '');
    const headings = Array.from(container.querySelectorAll(':scope > ' + tag.toLowerCase()));
    headings.forEach(h => {
      const details = document.createElement('details');
      details.className = 'level-' + level;
      if (h.id) details.id = h.id;
      const summary = document.createElement('summary');
      summary.innerHTML = h.innerHTML;
      details.appendChild(summary);
      let sibling = h.nextElementSibling;
      const collected = [];
      while (sibling && sibling.tagName !== tag) {
        collected.push(sibling);
        sibling = sibling.nextElementSibling;
      }
      collected.forEach(el => details.appendChild(el));
      h.replaceWith(details);
    });
    return headings.length;
  }

  // Fold h2 sections, then h3 sections within each h2
  const count = foldHeadings(body, 'H2');
  if (count === 0) {
    document.querySelector('.doc-controls').style.display = 'none';
    return;
  }
  body.querySelectorAll('details.level-2').forEach(d => foldHeadings(d, 'H3'));

  // Toggle button
  const btn = document.getElementById('toggle-sections');
  if (!btn) return;
  btn.addEventListener('click', () => {
    const allDetails = body.querySelectorAll('details');
    const expanding = btn.textContent === 'Expand all';
    allDetails.forEach(d => d.open = expanding);
    btn.textContent = expanding ? 'Collapse all' : 'Expand all';
  });

  // Auto-open details when navigating to an anchor
  function openAnchorTarget() {
    if (!location.hash) return;
    const target = document.querySelector(location.hash);
    if (!target) return;
    let el = target;
    while (el) {
      if (el.tagName === 'DETAILS') el.open = true;
      el = el.parentElement;
    }
    target.scrollIntoView();
  }
  openAnchorTarget();
  window.addEventListener('hashchange', openAnchorTarget);
});
</script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.querySelector('.md-body'), {
    delimiters: [
      {left: '$$', right: '$$', display: true},
      {left: '$', right: '$', display: false}
    ],
    throwOnError: false
  });"></script>
</body>
</html>
