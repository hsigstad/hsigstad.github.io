<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Griswold v. Connecticut — The Binding Force of Law</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
<style>
  :root {
    --bg: #f8f9fa; --card: #fff; --fg: #1a1a1a; --muted: #666;
    --border: #dee2e6; --accent: #0d6efd; --accent2: #198754;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg); color: var(--fg); line-height: 1.5;
  }

  main {
    padding: 1.5rem 2rem 3rem; max-width: 900px; margin: 0 auto;
  }

  /* Markdown body styles */
  .md-body { font-size: .92rem; line-height: 1.7; color: #1f2328; }

  .md-body h1 { font-size: 1.5rem; font-weight: 600; margin: 1.8rem 0 .8rem; padding-bottom: .3rem; border-bottom: 1px solid var(--border); }
  .md-body h2 { font-size: 1.25rem; font-weight: 600; margin: 1.6rem 0 .6rem; padding-bottom: .25rem; border-bottom: 1px solid var(--border); }
  .md-body h3 { font-size: 1.05rem; font-weight: 600; margin: 1.3rem 0 .5rem; }
  .md-body h4 { font-size: .95rem; font-weight: 600; margin: 1.1rem 0 .4rem; }
  .md-body h5, .md-body h6 { font-size: .88rem; font-weight: 600; margin: 1rem 0 .4rem; }
  .md-body h1:first-child { margin-top: 0; }

  .md-body p { margin: 0 0 .8rem; }

  .md-body ul, .md-body ol { margin: 0 0 .8rem; padding-left: 1.8rem; }
  .md-body li { margin-bottom: .25rem; }
  .md-body li > ul, .md-body li > ol { margin-top: .25rem; margin-bottom: 0; }

  /* Task lists */
  .md-body ul li { list-style: disc; }
  .md-body li input[type="checkbox"] {
    margin-right: .4rem; vertical-align: middle; position: relative; top: -1px;
  }

  .md-body a { color: var(--accent); text-decoration: none; }
  .md-body a:hover { text-decoration: underline; }

  .md-body strong { font-weight: 600; }

  .md-body blockquote {
    margin: 0 0 .8rem; padding: .4rem 1rem;
    border-left: 4px solid var(--accent); background: #f0f4f8;
    color: #555; font-size: .88rem;
  }
  .md-body blockquote p:last-child { margin-bottom: 0; }

  .md-body code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    font-size: .85em; background: #eef1f5; padding: .15rem .35rem;
    border-radius: 4px;
  }
  .md-body pre {
    margin: 0 0 .8rem; padding: .9rem 1rem;
    background: #f6f8fa; border: 1px solid var(--border);
    border-radius: 6px; overflow-x: auto; line-height: 1.45;
  }
  .md-body pre code {
    background: none; padding: 0; font-size: .82rem;
  }

  .md-body table {
    width: 100%; border-collapse: collapse; margin: 0 0 .8rem;
    font-size: .85rem; display: block; overflow-x: auto;
  }
  .md-body th, .md-body td {
    padding: .45rem .7rem; border: 1px solid var(--border); text-align: left;
  }
  .md-body th { background: #f0f4f8; font-weight: 600; }
  .md-body tr:nth-child(even) td { background: #fafbfc; }

  .md-body hr {
    border: none; border-top: 1px solid var(--border); margin: 1.5rem 0;
  }

  .md-body img { max-width: 100%; }

  /* Collapsible sections */
  .doc-controls { margin-bottom: 1rem; }
  .doc-controls button {
    font-size: .8rem; padding: .3rem .7rem; cursor: pointer;
    background: var(--card); border: 1px solid var(--border); border-radius: 4px;
    color: var(--accent); font-weight: 600;
  }
  .doc-controls button:hover { background: #e7f1ff; }
  .md-body details { margin-bottom: .5rem; }
  .md-body details summary {
    font-weight: 600; cursor: pointer; list-style: none;
  }
  .md-body details summary::-webkit-details-marker { display: none; }
  .md-body details summary::before {
    content: "\25b6"; font-size: .7em; margin-right: .5rem;
    display: inline-block; transition: transform .15s;
  }
  .md-body details[open] summary::before { transform: rotate(90deg); }
  .md-body details.level-2 > summary {
    font-size: 1.25rem; padding-bottom: .25rem;
    border-bottom: 1px solid var(--border); margin: 1.6rem 0 .6rem;
  }
  .md-body details.level-3 > summary {
    font-size: 1.05rem; margin: 1.3rem 0 .5rem;
  }

  footer {
    text-align: center; padding: 1.5rem; font-size: .8rem; color: var(--muted);
    border-top: 1px solid var(--border); margin-top: 2rem;
  }
</style>
</head>
<body>

<style>
  .site-nav {
    position: sticky; top: 0; z-index: 100;
    background: #212529; display: flex; align-items: center;
    padding: 0 2rem; height: 3rem;
  }
  .site-nav .nav-brand {
    color: #fff; text-decoration: none; font-weight: 600; font-size: 1rem;
    margin-right: auto;
  }
  .site-nav .nav-brand:hover { color: #e9ecef; }
  .site-nav .nav-link {
    color: #adb5bd; text-decoration: none; font-size: .85rem;
    padding: 0 .75rem; height: 3rem; display: flex; align-items: center;
    background: none; border: none; cursor: pointer; font-family: inherit;
  }
  .site-nav .nav-link:hover, .site-nav .nav-link.active { color: #fff; }
  .nav-dropdown { position: relative; }
  .dropdown-menu {
    display: none; position: absolute; top: 3rem; right: 0;
    background: #fff; border: 1px solid var(--border); border-radius: 6px;
    box-shadow: 0 4px 16px rgba(0,0,0,.12); min-width: 220px;
    padding: .4rem 0; z-index: 200; max-height: 80vh; overflow-y: auto;
  }
  .nav-dropdown.open .dropdown-menu { display: block; }
  .dropdown-menu a {
    display: block; padding: .3rem 1rem; color: #1a1a1a;
    text-decoration: none; font-size: .82rem;
  }
  .dropdown-menu a:hover { background: #f0f4f8; }
  .dropdown-group-label {
    padding: .4rem 1rem .15rem; font-size: .68rem; font-weight: 700;
    color: #888; text-transform: uppercase; letter-spacing: .04em;
  }
  .dropdown-divider { border-top: 1px solid #eee; margin: .3rem 0; }
  .page-header {
    padding: .8rem 2rem; border-bottom: 1px solid var(--border); background: #fff;
  }
  .page-header h1 { font-size: 1.3rem; font-weight: 600; }
  .page-header p { color: var(--muted); font-size: .85rem; margin-top: .15rem; }
</style>

<nav class="site-nav">
  <a href="../index.html" class="nav-brand">The Binding Force of Law</a>
  <a href="../index.html" class="nav-link">Home</a>
  <a href="../paper/index.html" class="nav-link">Paper</a>
  <div class="nav-dropdown">
    <button class="nav-link">Docs &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Reference</div>
    <a href="../docs/summary.html">Research Summary</a>
    <a href="../docs/institutions.html">Institutional Background</a>
    <a href="../docs/data.html">Data & Extractions</a>
    <a href="../docs/methods.html">Formal Model</a>
    <a href="../docs/literature.html">Literature</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Working notes</div>
    <a href="../docs/thinking.html">Open Questions & Ideas</a>
    <a href="../docs/decisions.html">Key Decisions</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Tasks</div>
    <a href="../docs/todo.html">Active Tasks</a>
    <a href="../docs/done.html">Completed Tasks</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Communication</div>
    <a href="../docs/meetings.html">Meeting Notes</a>
    <a href="../docs/feedback.html">External Feedback</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link">Briefs &#9662;</button>
    <div class="dropdown-menu">
    <a href="../briefs/holding-formalization.html">Decision brief: How to formalize holdings</a>
    <a href="../briefs/paper-status.html">Decision brief: Paper status and path to submission</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link active">Cases &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Equal Protection</div>
    <a href="../cases/carolene_products_1938.html">United States v. Carolene Products Co.</a>
    <a href="../cases/korematsu_1944.html">Korematsu v. United States</a>
    <a href="../cases/brown_v_board_1954.html">Brown v. Board of Education</a>
    <a href="../cases/loving_v_virginia_1967.html">Loving v. Virginia</a>
    <a href="../cases/reed_v_reed_1971.html">Reed v. Reed</a>
    <a href="../cases/craig_v_boren_1976.html">Craig v. Boren</a>
    <a href="../cases/washington_v_davis_1976.html">Washington v. Davis</a>
    <a href="../cases/arlington_heights_1977.html">Village of Arlington Heights v. Metropolitan Housing Development Corp.</a>
    <a href="../cases/feeney_1979.html">Personnel Administrator of Massachusetts v. Feeney</a>
    <a href="../cases/cleburne_1985.html">City of Cleburne v. Cleburne Living Center, Inc.</a>
    <a href="../cases/adarand_1995.html">Adarand Constructors, Inc. v. Pena</a>
    <a href="../cases/romer_v_evans_1996.html">Romer v. Evans</a>
    <a href="../cases/us_v_virginia_vmi_1996.html">United States v. Virginia</a>
    <a href="../cases/grutter_2003.html">Grutter v. Bollinger</a>
    <a href="../cases/parents_involved_2007.html">Parents Involved in Community Schools v. Seattle School District No. 1</a>
    <a href="../cases/fisher_i_2013.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/fisher_ii_2016.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/sffa_2023.html">Students for Fair Admissions, Inc. v. President and Fellows of Harvard College</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Due Process</div>
    <a href="../cases/lochner_1905.html">Lochner v. New York</a>
    <a href="../cases/griswold_1965.html">Griswold v. Connecticut</a>
    <a href="../cases/roe_v_wade_1973.html">Roe v. Wade</a>
    <a href="../cases/mathews_v_eldridge_1976.html">Mathews v. Eldridge</a>
    <a href="../cases/casey_1992.html">Planned Parenthood of Southeastern Pennsylvania v. Casey</a>
    <a href="../cases/glucksberg_1997.html">Washington v. Glucksberg</a>
    <a href="../cases/dobbs_2022.html">Dobbs v. Jackson Women's Health Organization</a>
    </div>
  </div>
</nav>
<script>
document.querySelectorAll('.nav-dropdown > .nav-link').forEach(function(btn) {
  btn.addEventListener('click', function(e) {
    e.stopPropagation();
    var dd = btn.parentElement;
    var wasOpen = dd.classList.contains('open');
    document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
    if (!wasOpen) dd.classList.add('open');
  });
});
document.addEventListener('click', function() {
  document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
});
</script>

<div class="page-header">
  <h1>Griswold v. Connecticut</h1>
</div>

<main>
<div class="doc-controls">
  <button id="toggle-sections">Expand all</button>
</div>
<div class="md-body">
<h1>Griswold v. Connecticut, 381 U.S. 479 (1965)</h1>
<p><strong>Author:</strong> Douglas (majority)
<strong>Outcome:</strong> Appellants win ($d = 1$: Connecticut's contraceptive ban violates DP)
<strong>Concurrences:</strong> Goldberg, Harlan, White
<strong>Dissents:</strong> Black, Stewart</p>
<hr />
<h2 id="1-holding-h-t">1. Holding ($H_t$)</h2>
<blockquote>
<p>&quot;The Connecticut statute forbidding use of contraceptives violates the right of marital privacy which is within the penumbra of specific guarantees of the Bill of Rights.&quot; (p. 485)</p>
</blockquote>
<p><strong>As constraint on admissible $(w, c)$:</strong> Rules out any decision rule under which a state can criminalize the use of contraceptives by married couples, as this violates a right of privacy derived from the penumbras of the Bill of Rights. Future courts must accept that marital privacy is protected against state interference, even if not explicitly mentioned in the Constitution.</p>
<p><strong>What the holding does NOT constrain:</strong></p>
<ul>
<li>Whether the right of privacy extends to unmarried couples</li>
<li>The scope of privacy rights beyond contraceptive use</li>
<li>The applicability of privacy rights in non-marital contexts</li>
<li>The specific constitutional basis for privacy (penumbras vs. substantive due process)</li>
</ul>
<hr />
<h2 id="2-fact-vector-z-t">2. Fact vector $z_t$</h2>
<h3 id="2a-raw-salient-facts">2a. Raw salient facts</h3>
<ul>
<li><strong>Marital privacy:</strong> The law &quot;operates directly on an intimate relation of husband and wife&quot; (p. 485). Favors: plaintiff.</li>
<li><strong>Criminalization of contraceptive use:</strong> Connecticut statute makes it a crime to use contraceptives (p. 480). Favors: government.</li>
<li><strong>Professional medical advice:</strong> Appellants provided medical advice and prescriptions for contraceptives (p. 480). Favors: plaintiff.</li>
<li><strong>Ineffectiveness of enforcement:</strong> The law is &quot;obviously unenforceable&quot; except in specific contexts (p. 527). Favors: plaintiff.</li>
<li><strong>Historical context of privacy:</strong> The right of privacy is &quot;older than the Bill of Rights&quot; and &quot;older than our political parties&quot; (p. 486). Favors: plaintiff.</li>
</ul>
<h3 id="2b-dimension-mapping">2b. Dimension mapping</h3>
<table>
<thead>
<tr>
  <th>Dimension</th>
  <th>Value</th>
  <th>Raw fact(s) mapped</th>
  <th>Textual basis</th>
</tr>
</thead>
<tbody>
<tr>
  <td>D1 Liberty interest type</td>
  <td>Privacy-intimacy</td>
  <td>Marital privacy; professional medical advice</td>
  <td>&quot;operates directly on an intimate relation of husband and wife&quot; (p. 485)</td>
</tr>
<tr>
  <td>D2 Historical grounding</td>
  <td>High</td>
  <td>Historical context of privacy</td>
  <td>&quot;older than the Bill of Rights&quot; (p. 486)</td>
</tr>
<tr>
  <td>D3 Level of generality</td>
  <td>Broad</td>
  <td>Marital privacy</td>
  <td>&quot;right of marital privacy&quot; (p. 485)</td>
</tr>
<tr>
  <td>D4 Government interest strength</td>
  <td>Weak</td>
  <td>Ineffectiveness of enforcement</td>
  <td>&quot;obviously unenforceable&quot; (p. 527)</td>
</tr>
<tr>
  <td>D5 Intrusion severity</td>
  <td>High</td>
  <td>Criminalization of contraceptive use</td>
  <td>&quot;makes it a crime to use contraceptives&quot; (p. 480)</td>
</tr>
<tr>
  <td>D6 Methodology</td>
  <td>Penumbras</td>
  <td>Marital privacy; historical context</td>
  <td>&quot;within the penumbra of specific guarantees&quot; (p. 485)</td>
</tr>
<tr>
  <td>D7 Institutional setting</td>
  <td>Medical</td>
  <td>Professional medical advice</td>
  <td>&quot;provided medical advice and prescriptions&quot; (p. 480)</td>
</tr>
<tr>
  <td>D8 Precedent density</td>
  <td>Low</td>
  <td>—</td>
  <td>The Court establishes a new precedent on privacy</td>
</tr>
</tbody>
</table>
<p><strong>Unmapped facts:</strong></p>
<ul>
<li><em>Ineffectiveness of enforcement</em> does not map directly to any dimension but highlights the practical implications of the law's intrusion on privacy.</li>
</ul>
<p><strong>Notable:</strong> The Court's reliance on the concept of &quot;penumbras&quot; to derive privacy rights is significant, as it extends constitutional protections beyond explicit text.</p>
<hr />
<h2 id="3-treatment-of-prior-holdings-mathcal-f-t-update">3. Treatment of prior holdings ($\mathcal{F}_t$ update)</h2>
<h3 id="lochner-v-new-york-1905">Lochner v. New York (1905)</h3>
<ul>
<li><strong>Status:</strong> Declined to follow. The Court explicitly rejects the Lochner approach to due process (p. 481).</li>
<li><strong>Characterization:</strong> The Court distinguishes its role from that of a &quot;super-legislature&quot; (p. 481).</li>
<li><strong>Model interpretation:</strong> Reinforces a shift away from substantive due process based on economic rights, narrowing $\mathcal{F}_t$ to exclude Lochner-era reasoning.</li>
</ul>
<h3 id="pierce-v-society-of-sisters-1925-meyer-v-nebraska-1923">Pierce v. Society of Sisters (1925); Meyer v. Nebraska (1923)</h3>
<ul>
<li><strong>Status:</strong> Reaffirmed. The Court cites these cases as recognizing fundamental rights not explicitly mentioned in the Constitution (p. 482-483).</li>
<li><strong>Characterization:</strong> These cases are used to support the idea that the Constitution protects certain personal liberties.</li>
<li><strong>Model interpretation:</strong> Expands $\mathcal{F}_t$ to include unenumerated rights derived from the &quot;spirit&quot; of the Constitution.</li>
</ul>
<h3 id="naacp-v-alabama-1958">NAACP v. Alabama (1958)</h3>
<ul>
<li><strong>Status:</strong> Relied on. The Court uses this case to support the idea of privacy in association (p. 484).</li>
<li><strong>Characterization:</strong> Privacy in association is seen as a peripheral First Amendment right.</li>
<li><strong>Model interpretation:</strong> Supports the inclusion of privacy as a protected liberty interest, broadening $\mathcal{F}_t$.</li>
</ul>
<hr />
<h2 id="4-overruling-constraint-removal-at-cost-c">4. Overruling (constraint removal at cost $C$)</h2>
<p><strong>What is removed:</strong> The constraint that states can criminalize the use of contraceptives by married couples.</p>
<p><strong>Justification (mapping to stare decisis factors):</strong></p>
<ul>
<li><em>Quality of reasoning:</em> The Court finds that the law's intrusion into marital privacy is unjustified and lacks a compelling state interest (p. 485-486).</li>
<li><em>Workability:</em> The law is deemed unenforceable in practice (p. 527).</li>
<li><em>Consistency with related doctrine:</em> Aligns with prior cases recognizing unenumerated rights (Pierce, Meyer).</li>
<li><em>Reliance interests:</em> Not addressed.</li>
</ul>
<p><strong>Institutional cost:</strong> The decision signals a broader recognition of privacy rights, potentially affecting other areas of law.</p>
<hr />
<h2 id="5-breadth">5. Breadth</h2>
<p><strong>Narrow reading (what the Court explicitly holds):</strong></p>
<ul>
<li>The Connecticut statute criminalizing contraceptive use by married couples is unconstitutional due to its violation of marital privacy.</li>
</ul>
<p><strong>Broad reading (what the reasoning supports):</strong></p>
<ul>
<li>The reasoning could extend to protect privacy in other intimate relationships and contexts beyond marriage.</li>
<li>Suggests a broader constitutional right to privacy that could impact laws regulating personal autonomy.</li>
</ul>
<p><strong>Breadth ambiguity:</strong>
The opinion leaves open the extent to which privacy rights apply outside the marital context and whether they protect other forms of intimate conduct.</p>
<hr />
<h2 id="6-concurrences-dissents-alternative-admissible-theories">6. Concurrences / dissents (alternative admissible theories)</h2>
<h3 id="goldberg-concurring">Goldberg, concurring</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Emphasizes the Ninth Amendment as supporting unenumerated rights, suggesting a broader protection of personal liberties (p. 490-491).</li>
<li><strong>Key disagreement:</strong> Disagrees with the majority's reliance solely on penumbras, advocating for a more explicit recognition of unenumerated rights.</li>
</ul>
<h3 id="harlan-concurring-in-judgment">Harlan, concurring in judgment</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Argues for a substantive due process approach, focusing on &quot;ordered liberty&quot; rather than penumbras (p. 500-501).</li>
<li><strong>Key disagreement:</strong> Prefers a direct application of due process principles over the penumbral reasoning.</li>
</ul>
<h3 id="white-concurring-in-judgment">White, concurring in judgment</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Focuses on the arbitrary nature of the law and its lack of justification under due process (p. 502-503).</li>
<li><strong>Key disagreement:</strong> Emphasizes the lack of a compelling state interest rather than penumbral rights.</li>
</ul>
<h3 id="black-dissenting">Black, dissenting</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Rejects the use of substantive due process and penumbras, arguing for strict adherence to explicit constitutional text (p. 509-510).</li>
<li><strong>Key disagreement:</strong> Opposes judicial creation of rights not explicitly stated in the Constitution.</li>
</ul>
<h3 id="stewart-dissenting">Stewart, dissenting</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Argues against finding a constitutional right of privacy, emphasizing judicial restraint and legislative authority (p. 526-527).</li>
<li><strong>Key disagreement:</strong> Disagrees with the majority's creation of a privacy right from constitutional penumbras.</li>
</ul>
<hr />
<h2 id="7-reasoning-revealing-implicit-weights-on-dimensions">7. Reasoning revealing implicit weights on dimensions</h2>
<p><strong>Privacy as a fundamental right (D1 weight is high):</strong></p>
<blockquote>
<p>&quot;We deal with a right of privacy older than the Bill of Rights-older than our political parties, older than our school system.&quot; (p. 486)</p>
</blockquote>
<p>The Court emphasizes the deep historical roots of privacy, suggesting a high weight on privacy-intimacy in the liberty interest dimension.</p>
<p><strong>Penumbras and privacy (D6 weight is high):</strong></p>
<blockquote>
<p>&quot;Specific guarantees in the Bill of Rights have penumbras, formed by emanations from those guarantees that help give them life and substance.&quot; (p. 484)</p>
</blockquote>
<p>The Court's reliance on penumbras indicates a high weight on this methodological approach, expanding the scope of protected rights.</p>
<p><strong>Marital relationship as a protected zone (D1 and D5 weight is high):</strong></p>
<blockquote>
<p>&quot;The very idea is repulsive to the notions of privacy surrounding the marriage relationship.&quot; (p. 486)</p>
</blockquote>
<p>The Court underscores the severity of intrusion into marital privacy, highlighting the importance of protecting intimate relationships from state interference.</p>

</div>
</main>

<footer>
  Generated by <code>python3 -m source.site.build_all</code>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const body = document.querySelector('.md-body');
  if (!body) return;

  function foldHeadings(container, tag) {
    const level = tag.replace('H', '');
    const headings = Array.from(container.querySelectorAll(':scope > ' + tag.toLowerCase()));
    headings.forEach(h => {
      const details = document.createElement('details');
      details.className = 'level-' + level;
      if (h.id) details.id = h.id;
      const summary = document.createElement('summary');
      summary.innerHTML = h.innerHTML;
      details.appendChild(summary);
      let sibling = h.nextElementSibling;
      const collected = [];
      while (sibling && sibling.tagName !== tag) {
        collected.push(sibling);
        sibling = sibling.nextElementSibling;
      }
      collected.forEach(el => details.appendChild(el));
      h.replaceWith(details);
    });
    return headings.length;
  }

  // Fold h2 sections, then h3 sections within each h2
  const count = foldHeadings(body, 'H2');
  if (count === 0) {
    document.querySelector('.doc-controls').style.display = 'none';
    return;
  }
  body.querySelectorAll('details.level-2').forEach(d => foldHeadings(d, 'H3'));

  // Toggle button
  const btn = document.getElementById('toggle-sections');
  if (!btn) return;
  btn.addEventListener('click', () => {
    const allDetails = body.querySelectorAll('details');
    const expanding = btn.textContent === 'Expand all';
    allDetails.forEach(d => d.open = expanding);
    btn.textContent = expanding ? 'Collapse all' : 'Expand all';
  });

  // Auto-open details when navigating to an anchor
  function openAnchorTarget() {
    if (!location.hash) return;
    const target = document.querySelector(location.hash);
    if (!target) return;
    let el = target;
    while (el) {
      if (el.tagName === 'DETAILS') el.open = true;
      el = el.parentElement;
    }
    target.scrollIntoView();
  }
  openAnchorTarget();
  window.addEventListener('hashchange', openAnchorTarget);
});
</script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.querySelector('.md-body'), {
    delimiters: [
      {left: '$$', right: '$$', display: true},
      {left: '$', right: '$', display: false}
    ],
    throwOnError: false
  });"></script>
</body>
</html>
