<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fisher v. University of Texas at Austin â€” The Binding Force of Law</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
<style>
  :root {
    --bg: #f8f9fa; --card: #fff; --fg: #1a1a1a; --muted: #666;
    --border: #dee2e6; --accent: #0d6efd; --accent2: #198754;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg); color: var(--fg); line-height: 1.5;
  }

  main {
    padding: 1.5rem 2rem 3rem; max-width: 900px; margin: 0 auto;
  }

  /* Markdown body styles */
  .md-body { font-size: .92rem; line-height: 1.7; color: #1f2328; }

  .md-body h1 { font-size: 1.5rem; font-weight: 600; margin: 1.8rem 0 .8rem; padding-bottom: .3rem; border-bottom: 1px solid var(--border); }
  .md-body h2 { font-size: 1.25rem; font-weight: 600; margin: 1.6rem 0 .6rem; padding-bottom: .25rem; border-bottom: 1px solid var(--border); }
  .md-body h3 { font-size: 1.05rem; font-weight: 600; margin: 1.3rem 0 .5rem; }
  .md-body h4 { font-size: .95rem; font-weight: 600; margin: 1.1rem 0 .4rem; }
  .md-body h5, .md-body h6 { font-size: .88rem; font-weight: 600; margin: 1rem 0 .4rem; }
  .md-body h1:first-child { margin-top: 0; }

  .md-body p { margin: 0 0 .8rem; }

  .md-body ul, .md-body ol { margin: 0 0 .8rem; padding-left: 1.8rem; }
  .md-body li { margin-bottom: .25rem; }
  .md-body li > ul, .md-body li > ol { margin-top: .25rem; margin-bottom: 0; }

  /* Task lists */
  .md-body ul li { list-style: disc; }
  .md-body li input[type="checkbox"] {
    margin-right: .4rem; vertical-align: middle; position: relative; top: -1px;
  }

  .md-body a { color: var(--accent); text-decoration: none; }
  .md-body a:hover { text-decoration: underline; }

  .md-body strong { font-weight: 600; }

  .md-body blockquote {
    margin: 0 0 .8rem; padding: .4rem 1rem;
    border-left: 4px solid var(--accent); background: #f0f4f8;
    color: #555; font-size: .88rem;
  }
  .md-body blockquote p:last-child { margin-bottom: 0; }

  .md-body code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    font-size: .85em; background: #eef1f5; padding: .15rem .35rem;
    border-radius: 4px;
  }
  .md-body pre {
    margin: 0 0 .8rem; padding: .9rem 1rem;
    background: #f6f8fa; border: 1px solid var(--border);
    border-radius: 6px; overflow-x: auto; line-height: 1.45;
  }
  .md-body pre code {
    background: none; padding: 0; font-size: .82rem;
  }

  .md-body table {
    width: 100%; border-collapse: collapse; margin: 0 0 .8rem;
    font-size: .85rem; display: block; overflow-x: auto;
  }
  .md-body th, .md-body td {
    padding: .45rem .7rem; border: 1px solid var(--border); text-align: left;
  }
  .md-body th { background: #f0f4f8; font-weight: 600; }
  .md-body tr:nth-child(even) td { background: #fafbfc; }

  .md-body hr {
    border: none; border-top: 1px solid var(--border); margin: 1.5rem 0;
  }

  .md-body img { max-width: 100%; }

  /* Collapsible sections */
  .doc-controls { margin-bottom: 1rem; }
  .doc-controls button {
    font-size: .8rem; padding: .3rem .7rem; cursor: pointer;
    background: var(--card); border: 1px solid var(--border); border-radius: 4px;
    color: var(--accent); font-weight: 600;
  }
  .doc-controls button:hover { background: #e7f1ff; }
  .md-body details { margin-bottom: .5rem; }
  .md-body details summary {
    font-weight: 600; cursor: pointer; list-style: none;
  }
  .md-body details summary::-webkit-details-marker { display: none; }
  .md-body details summary::before {
    content: "\25b6"; font-size: .7em; margin-right: .5rem;
    display: inline-block; transition: transform .15s;
  }
  .md-body details[open] summary::before { transform: rotate(90deg); }
  .md-body details.level-2 > summary {
    font-size: 1.25rem; padding-bottom: .25rem;
    border-bottom: 1px solid var(--border); margin: 1.6rem 0 .6rem;
  }
  .md-body details.level-3 > summary {
    font-size: 1.05rem; margin: 1.3rem 0 .5rem;
  }

  footer {
    text-align: center; padding: 1.5rem; font-size: .8rem; color: var(--muted);
    border-top: 1px solid var(--border); margin-top: 2rem;
  }
</style>
</head>
<body>

<style>
  .site-nav {
    position: sticky; top: 0; z-index: 100;
    background: #212529; display: flex; align-items: center;
    padding: 0 2rem; height: 3rem;
  }
  .site-nav .nav-brand {
    color: #fff; text-decoration: none; font-weight: 600; font-size: 1rem;
    margin-right: auto;
  }
  .site-nav .nav-brand:hover { color: #e9ecef; }
  .site-nav .nav-link {
    color: #adb5bd; text-decoration: none; font-size: .85rem;
    padding: 0 .75rem; height: 3rem; display: flex; align-items: center;
    background: none; border: none; cursor: pointer; font-family: inherit;
  }
  .site-nav .nav-link:hover, .site-nav .nav-link.active { color: #fff; }
  .nav-dropdown { position: relative; }
  .dropdown-menu {
    display: none; position: absolute; top: 3rem; right: 0;
    background: #fff; border: 1px solid var(--border); border-radius: 6px;
    box-shadow: 0 4px 16px rgba(0,0,0,.12); min-width: 220px;
    padding: .4rem 0; z-index: 200; max-height: 80vh; overflow-y: auto;
  }
  .nav-dropdown.open .dropdown-menu { display: block; }
  .dropdown-menu a {
    display: block; padding: .3rem 1rem; color: #1a1a1a;
    text-decoration: none; font-size: .82rem;
  }
  .dropdown-menu a:hover { background: #f0f4f8; }
  .dropdown-group-label {
    padding: .4rem 1rem .15rem; font-size: .68rem; font-weight: 700;
    color: #888; text-transform: uppercase; letter-spacing: .04em;
  }
  .dropdown-divider { border-top: 1px solid #eee; margin: .3rem 0; }
  .page-header {
    padding: .8rem 2rem; border-bottom: 1px solid var(--border); background: #fff;
  }
  .page-header h1 { font-size: 1.3rem; font-weight: 600; }
  .page-header p { color: var(--muted); font-size: .85rem; margin-top: .15rem; }
</style>

<nav class="site-nav">
  <a href="../index.html" class="nav-brand">The Binding Force of Law</a>
  <a href="../index.html" class="nav-link">Home</a>
  <a href="../paper/index.html" class="nav-link">Paper</a>
  <div class="nav-dropdown">
    <button class="nav-link">Docs &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Reference</div>
    <a href="../docs/summary.html">Research Summary</a>
    <a href="../docs/institutions.html">Institutional Background</a>
    <a href="../docs/data.html">Data & Extractions</a>
    <a href="../docs/methods.html">Formal Model</a>
    <a href="../docs/literature.html">Literature</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Working notes</div>
    <a href="../docs/thinking.html">Open Questions & Ideas</a>
    <a href="../docs/decisions.html">Key Decisions</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Tasks</div>
    <a href="../docs/todo.html">Active Tasks</a>
    <a href="../docs/done.html">Completed Tasks</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Communication</div>
    <a href="../docs/meetings.html">Meeting Notes</a>
    <a href="../docs/feedback.html">External Feedback</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link">Briefs &#9662;</button>
    <div class="dropdown-menu">
    <a href="../briefs/holding-formalization.html">Decision brief: How to formalize holdings</a>
    <a href="../briefs/paper-status.html">Decision brief: Paper status and path to submission</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link active">Cases &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Equal Protection</div>
    <a href="../cases/carolene_products_1938.html">United States v. Carolene Products Co.</a>
    <a href="../cases/korematsu_1944.html">Korematsu v. United States</a>
    <a href="../cases/brown_v_board_1954.html">Brown v. Board of Education</a>
    <a href="../cases/loving_v_virginia_1967.html">Loving v. Virginia</a>
    <a href="../cases/reed_v_reed_1971.html">Reed v. Reed</a>
    <a href="../cases/craig_v_boren_1976.html">Craig v. Boren</a>
    <a href="../cases/washington_v_davis_1976.html">Washington v. Davis</a>
    <a href="../cases/arlington_heights_1977.html">Village of Arlington Heights v. Metropolitan Housing Development Corp.</a>
    <a href="../cases/feeney_1979.html">Personnel Administrator of Massachusetts v. Feeney</a>
    <a href="../cases/cleburne_1985.html">City of Cleburne v. Cleburne Living Center, Inc.</a>
    <a href="../cases/adarand_1995.html">Adarand Constructors, Inc. v. Pena</a>
    <a href="../cases/romer_v_evans_1996.html">Romer v. Evans</a>
    <a href="../cases/us_v_virginia_vmi_1996.html">United States v. Virginia</a>
    <a href="../cases/grutter_2003.html">Grutter v. Bollinger</a>
    <a href="../cases/parents_involved_2007.html">Parents Involved in Community Schools v. Seattle School District No. 1</a>
    <a href="../cases/fisher_i_2013.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/fisher_ii_2016.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/sffa_2023.html">Students for Fair Admissions, Inc. v. President and Fellows of Harvard College</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Due Process</div>
    <a href="../cases/lochner_1905.html">Lochner v. New York</a>
    <a href="../cases/griswold_1965.html">Griswold v. Connecticut</a>
    <a href="../cases/roe_v_wade_1973.html">Roe v. Wade</a>
    <a href="../cases/mathews_v_eldridge_1976.html">Mathews v. Eldridge</a>
    <a href="../cases/casey_1992.html">Planned Parenthood of Southeastern Pennsylvania v. Casey</a>
    <a href="../cases/glucksberg_1997.html">Washington v. Glucksberg</a>
    <a href="../cases/dobbs_2022.html">Dobbs v. Jackson Women's Health Organization</a>
    </div>
  </div>
</nav>
<script>
document.querySelectorAll('.nav-dropdown > .nav-link').forEach(function(btn) {
  btn.addEventListener('click', function(e) {
    e.stopPropagation();
    var dd = btn.parentElement;
    var wasOpen = dd.classList.contains('open');
    document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
    if (!wasOpen) dd.classList.add('open');
  });
});
document.addEventListener('click', function() {
  document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
});
</script>

<div class="page-header">
  <h1>Fisher v. University of Texas at Austin</h1>
</div>

<main>
<div class="doc-controls">
  <button id="toggle-sections">Expand all</button>
</div>
<div class="md-body">
<h1>Fisher v. University of Texas at Austin, 570 U.S. 297 (2013)</h1>
<p><strong>Author:</strong> Kennedy (majority)
<strong>Outcome:</strong> Case vacated and remanded ($d = 0$: strict scrutiny not properly applied)
<strong>Concurrences:</strong> Scalia, Thomas
<strong>Dissents:</strong> Ginsburg</p>
<hr />
<h2 id="1-holding-h-t">1. Holding ($H_t$)</h2>
<blockquote>
<p>&quot;Because the Fifth Circuit did not hold the University to the demanding burden of strict scrutiny articulated in Grutter and Regents of Univ. of Cal. v. Bakke, its decision affirming the District Court's grant of summary judgment to the University was incorrect.&quot; (p. 297)</p>
</blockquote>
<p><strong>As constraint on admissible $(w, c)$:</strong> The holding requires that any university admissions program using racial classifications must be subjected to strict scrutiny. This means the university must demonstrate that its use of race is narrowly tailored to achieve the compelling interest of diversity. The Fifth Circuit's decision is vacated because it did not apply this standard correctly, implying that future courts must ensure a rigorous application of strict scrutiny without undue deference to the university's assertions.</p>
<p><strong>What the holding does NOT constrain:</strong></p>
<ul>
<li>Whether the University of Texas's specific use of race in admissions is ultimately constitutional.</li>
<li>The broader question of whether race can ever be used in admissions under the Equal Protection Clause.</li>
<li>The validity of the compelling interest in diversity itself, as established in Grutter.</li>
</ul>
<hr />
<h2 id="2-fact-vector-z-t">2. Fact vector $z_t$</h2>
<h3 id="2a-raw-salient-facts">2a. Raw salient facts</h3>
<ul>
<li><strong>Use of race in admissions:</strong> The University considers race as one of various factors in its admissions process, aiming to achieve a &quot;critical mass&quot; of minority students (p. 301). Favors: government.</li>
<li><strong>Previous admissions programs:</strong> The University had previously used a race-neutral admissions program following the Hopwood decision, which was later adjusted to include race after Grutter (p. 305). Favors: plaintiff (suggests alternatives exist).</li>
<li><strong>Top Ten Percent Law:</strong> This law grants automatic admission to students in the top 10% of their high school class, contributing to diversity without explicit racial considerations (p. 305). Favors: plaintiff (race-neutral alternative).</li>
<li><strong>Lack of critical mass:</strong> The University's study indicated insufficient minority representation in certain classes, prompting the reintroduction of race as a factor (p. 306). Favors: government.</li>
<li><strong>Judicial deference:</strong> The Fifth Circuit gave deference to the University's judgment on the necessity of using race, which the Supreme Court found inappropriate under strict scrutiny (p. 313). Favors: plaintiff.</li>
</ul>
<h3 id="2b-dimension-mapping">2b. Dimension mapping</h3>
<table>
<thead>
<tr>
  <th>Dimension</th>
  <th>Value</th>
  <th>Raw fact(s) mapped</th>
  <th>Textual basis</th>
</tr>
</thead>
<tbody>
<tr>
  <td>D1 Facial classification</td>
  <td>High</td>
  <td>Use of race in admissions</td>
  <td>&quot;The University considers race as one of various factors&quot; (p. 301)</td>
</tr>
<tr>
  <td>D2 Protected trait</td>
  <td>Race</td>
  <td>Use of race in admissions</td>
  <td>Throughout</td>
</tr>
<tr>
  <td>D3 Intent evidence</td>
  <td>High</td>
  <td>Lack of critical mass; judicial deference</td>
  <td>&quot;The University's study indicated insufficient minority representation&quot; (p. 306)</td>
</tr>
<tr>
  <td>D4 Interest strength</td>
  <td>Compelling</td>
  <td>Compelling interest in diversity</td>
  <td>&quot;The educational benefits that flow from a diverse student body&quot; (p. 308)</td>
</tr>
<tr>
  <td>D5 Means-ends fit</td>
  <td>Poor</td>
  <td>Previous admissions programs; Top Ten Percent Law</td>
  <td>&quot;The University had previously used a race-neutral admissions program&quot; (p. 305)</td>
</tr>
<tr>
  <td>D6 Stigma / caste risk</td>
  <td>Low</td>
  <td>Judicial deference</td>
  <td>&quot;The Court of Appeals thus concluded that 'the narrow-tailoring inquiry... is undertaken with a degree of deference to the University'&quot; (p. 313)</td>
</tr>
<tr>
  <td>D7 Institutional setting</td>
  <td>Higher education</td>
  <td>Use of race in admissions</td>
  <td>&quot;The University of Texas at Austin&quot; (p. 300)</td>
</tr>
<tr>
  <td>D8 Precedent density</td>
  <td>High</td>
  <td>Reference to Bakke, Grutter, Gratz</td>
  <td>&quot;Among the Court's cases involving racial classifications in education&quot; (p. 307)</td>
</tr>
</tbody>
</table>
<p><strong>Unmapped facts:</strong></p>
<ul>
<li>The specific impact of the Top Ten Percent Law on minority enrollment does not map directly to any existing dimension but highlights the role of race-neutral alternatives in the strict scrutiny analysis.</li>
</ul>
<p><strong>Notable:</strong> The Court emphasizes that strict scrutiny requires a detailed examination of whether race-neutral alternatives can achieve the same diversity goals, signaling a high weight on D5 (means-ends fit) and a low tolerance for deference to institutional judgments.</p>
<hr />
<h2 id="3-treatment-of-prior-holdings-mathcal-f-t-update">3. Treatment of prior holdings ($\mathcal{F}_t$ update)</h2>
<h3 id="grutter-v-bollinger-2003">Grutter v. Bollinger (2003)</h3>
<ul>
<li><strong>Status:</strong> Relied on but clarified. The Court reaffirms the compelling interest in diversity but emphasizes that strict scrutiny requires a rigorous examination of means-ends fit without deference (p. 311).</li>
<li><strong>Characterization:</strong> Grutter is cited as establishing that diversity can be a compelling interest but does not allow deference to universities in determining whether their methods are narrowly tailored.</li>
<li><strong>Model interpretation:</strong> The decision tightens the constraint from Grutter by requiring a more stringent application of strict scrutiny, particularly regarding the necessity of race in achieving diversity.</li>
</ul>
<h3 id="regents-of-univ-of-cal-v-bakke-1978">Regents of Univ. of Cal. v. Bakke (1978)</h3>
<ul>
<li><strong>Status:</strong> Relied on. The Court uses Bakke to frame the strict scrutiny standard and the compelling interest in diversity (p. 307).</li>
<li><strong>Characterization:</strong> Bakke is foundational in establishing that racial classifications must meet strict scrutiny.</li>
<li><strong>Model interpretation:</strong> Bakke's framework is upheld, but the Court insists on a more searching inquiry into the necessity of racial classifications.</li>
</ul>
<h3 id="gratz-v-bollinger-2003">Gratz v. Bollinger (2003)</h3>
<ul>
<li><strong>Status:</strong> Relied on. The Court references Gratz to distinguish permissible from impermissible uses of race (p. 308).</li>
<li><strong>Characterization:</strong> Gratz is used to illustrate that automatic point systems for race are unconstitutional.</li>
<li><strong>Model interpretation:</strong> Reinforces the need for individualized consideration in admissions processes using race.</li>
</ul>
<hr />
<h2 id="4-overruling-constraint-removal-at-cost-c">4. Overruling (constraint removal at cost $C$)</h2>
<p>No overruling in this case. The Court explicitly declines to revisit the core holdings of Grutter, Bakke, or Gratz regarding the compelling interest in diversity. The focus is on the application of strict scrutiny, not the validity of the interest itself.</p>
<hr />
<h2 id="5-breadth">5. Breadth</h2>
<p><strong>Narrow reading (what the Court explicitly holds):</strong></p>
<ul>
<li>The Fifth Circuit's decision is vacated because it did not apply strict scrutiny correctly. The University must demonstrate that its use of race is narrowly tailored to achieve diversity.</li>
</ul>
<p><strong>Broad reading (what the reasoning supports):</strong></p>
<ul>
<li>The decision suggests that any use of race in admissions will face intense judicial scrutiny, potentially limiting the ability of universities to use race without clear evidence that no race-neutral alternatives suffice.</li>
</ul>
<p><strong>Breadth ambiguity:</strong></p>
<ul>
<li>The opinion leaves open how future courts should balance deference to educational judgments with the demands of strict scrutiny, particularly in evaluating race-neutral alternatives.</li>
</ul>
<hr />
<h2 id="6-concurrences-dissents-alternative-admissible-theories">6. Concurrences / dissents (alternative admissible theories)</h2>
<h3 id="justice-scalia-concurring">Justice Scalia, concurring</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Scalia reiterates his view that the Constitution prohibits government discrimination based on race. He joins the majority because the petitioner did not ask to overrule Grutter.</li>
<li><strong>Key disagreement:</strong> Scalia would impose a categorical ban on racial preferences, emphasizing a strict interpretation of equal protection.</li>
</ul>
<h3 id="justice-thomas-concurring">Justice Thomas, concurring</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Thomas argues for overruling Grutter, asserting that racial classifications are inherently harmful and should be categorically prohibited.</li>
<li><strong>Key disagreement:</strong> Thomas emphasizes the historical and ongoing harm of racial classifications, arguing they are never justified by educational benefits.</li>
</ul>
<h3 id="justice-ginsburg-dissenting">Justice Ginsburg, dissenting</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Ginsburg supports the University's admissions policy, arguing it aligns with Grutter and should be upheld. She emphasizes the importance of candidly considering race to address historical inequalities.</li>
<li><strong>Key disagreement:</strong> Ginsburg believes the majority's remand is unnecessary, as the University's policy already meets the requirements of narrow tailoring.</li>
</ul>
<hr />
<h2 id="7-reasoning-revealing-implicit-weights-on-dimensions">7. Reasoning revealing implicit weights on dimensions</h2>
<p><strong>Strict scrutiny requires rigorous analysis (D5 weight is high):</strong></p>
<blockquote>
<p>&quot;Strict scrutiny is a searching examination, and the government bears the burden to prove 'that the reasons for any [racial] classification [are] clearly identified and unquestionably legitimate.'&quot; (p. 310)</p>
</blockquote>
<p>The Court emphasizes the necessity of a detailed examination of race-neutral alternatives, indicating a high weight on means-ends fit.</p>
<p><strong>Deference to educational judgment is limited (D4 weight is compelling but constrained):</strong></p>
<blockquote>
<p>&quot;A university's 'educational judgment that such diversity is essential to its educational mission is one to which we defer.'... But the University must prove that the means chosen... are narrowly tailored to that goal.&quot; (p. 311)</p>
</blockquote>
<p>The Court acknowledges the compelling interest in diversity but limits deference to the means used to achieve it.</p>
<p><strong>Historical context and precedent (D8 weight is high):</strong></p>
<blockquote>
<p>&quot;Among the Court's cases involving racial classifications in education, there are three decisions that directly address the question... Bakke, Gratz, and Grutter.&quot; (p. 307)</p>
</blockquote>
<p>The Court situates its decision within a dense precedent landscape, indicating high weight on precedent density and conflict.</p>

</div>
</main>

<footer>
  Generated by <code>python3 -m source.site.build_all</code>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const body = document.querySelector('.md-body');
  if (!body) return;

  function foldHeadings(container, tag) {
    const level = tag.replace('H', '');
    const headings = Array.from(container.querySelectorAll(':scope > ' + tag.toLowerCase()));
    headings.forEach(h => {
      const details = document.createElement('details');
      details.className = 'level-' + level;
      if (h.id) details.id = h.id;
      const summary = document.createElement('summary');
      summary.innerHTML = h.innerHTML;
      details.appendChild(summary);
      let sibling = h.nextElementSibling;
      const collected = [];
      while (sibling && sibling.tagName !== tag) {
        collected.push(sibling);
        sibling = sibling.nextElementSibling;
      }
      collected.forEach(el => details.appendChild(el));
      h.replaceWith(details);
    });
    return headings.length;
  }

  // Fold h2 sections, then h3 sections within each h2
  const count = foldHeadings(body, 'H2');
  if (count === 0) {
    document.querySelector('.doc-controls').style.display = 'none';
    return;
  }
  body.querySelectorAll('details.level-2').forEach(d => foldHeadings(d, 'H3'));

  // Toggle button
  const btn = document.getElementById('toggle-sections');
  if (!btn) return;
  btn.addEventListener('click', () => {
    const allDetails = body.querySelectorAll('details');
    const expanding = btn.textContent === 'Expand all';
    allDetails.forEach(d => d.open = expanding);
    btn.textContent = expanding ? 'Collapse all' : 'Expand all';
  });

  // Auto-open details when navigating to an anchor
  function openAnchorTarget() {
    if (!location.hash) return;
    const target = document.querySelector(location.hash);
    if (!target) return;
    let el = target;
    while (el) {
      if (el.tagName === 'DETAILS') el.open = true;
      el = el.parentElement;
    }
    target.scrollIntoView();
  }
  openAnchorTarget();
  window.addEventListener('hashchange', openAnchorTarget);
});
</script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.querySelector('.md-body'), {
    delimiters: [
      {left: '$$', right: '$$', display: true},
      {left: '$', right: '$', display: false}
    ],
    throwOnError: false
  });"></script>
</body>
</html>
