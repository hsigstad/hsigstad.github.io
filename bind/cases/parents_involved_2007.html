<!DOCTYPE html>
<html lang="en">
<head>
<meta name="robots" content="noindex, nofollow">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Parents Involved in Community Schools v. Seattle School District No. 1 — The Binding Force of Law</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css">
<style>
  :root {
    --bg: #f8f9fa; --card: #fff; --fg: #1a1a1a; --muted: #666;
    --border: #dee2e6; --accent: #0d6efd; --accent2: #198754;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg); color: var(--fg); line-height: 1.5;
  }

  main {
    padding: 1.5rem 2rem 3rem; max-width: 900px; margin: 0 auto;
  }

  /* Markdown body styles */
  .md-body { font-size: .92rem; line-height: 1.7; color: #1f2328; }

  .md-body h1 { font-size: 1.5rem; font-weight: 600; margin: 1.8rem 0 .8rem; padding-bottom: .3rem; border-bottom: 1px solid var(--border); }
  .md-body h2 { font-size: 1.25rem; font-weight: 600; margin: 1.6rem 0 .6rem; padding-bottom: .25rem; border-bottom: 1px solid var(--border); }
  .md-body h3 { font-size: 1.05rem; font-weight: 600; margin: 1.3rem 0 .5rem; }
  .md-body h4 { font-size: .95rem; font-weight: 600; margin: 1.1rem 0 .4rem; }
  .md-body h5, .md-body h6 { font-size: .88rem; font-weight: 600; margin: 1rem 0 .4rem; }
  .md-body h1:first-child { margin-top: 0; }

  .md-body p { margin: 0 0 .8rem; }

  .md-body ul, .md-body ol { margin: 0 0 .8rem; padding-left: 1.8rem; }
  .md-body li { margin-bottom: .25rem; }
  .md-body li > ul, .md-body li > ol { margin-top: .25rem; margin-bottom: 0; }

  /* Task lists */
  .md-body ul li { list-style: disc; }
  .md-body li input[type="checkbox"] {
    margin-right: .4rem; vertical-align: middle; position: relative; top: -1px;
  }

  .md-body a { color: var(--accent); text-decoration: none; }
  .md-body a:hover { text-decoration: underline; }

  .md-body strong { font-weight: 600; }

  .md-body blockquote {
    margin: 0 0 .8rem; padding: .4rem 1rem;
    border-left: 4px solid var(--accent); background: #f0f4f8;
    color: #555; font-size: .88rem;
  }
  .md-body blockquote p:last-child { margin-bottom: 0; }

  .md-body code {
    font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, monospace;
    font-size: .85em; background: #eef1f5; padding: .15rem .35rem;
    border-radius: 4px;
  }
  .md-body pre {
    margin: 0 0 .8rem; padding: .9rem 1rem;
    background: #f6f8fa; border: 1px solid var(--border);
    border-radius: 6px; overflow-x: auto; line-height: 1.45;
  }
  .md-body pre code {
    background: none; padding: 0; font-size: .82rem;
  }

  .md-body table {
    width: 100%; border-collapse: collapse; margin: 0 0 .8rem;
    font-size: .85rem; display: block; overflow-x: auto;
  }
  .md-body th, .md-body td {
    padding: .45rem .7rem; border: 1px solid var(--border); text-align: left;
  }
  .md-body th { background: #f0f4f8; font-weight: 600; }
  .md-body tr:nth-child(even) td { background: #fafbfc; }

  .md-body hr {
    border: none; border-top: 1px solid var(--border); margin: 1.5rem 0;
  }

  .md-body img { max-width: 100%; }

  /* Collapsible sections */
  .doc-controls { margin-bottom: 1rem; }
  .doc-controls button {
    font-size: .8rem; padding: .3rem .7rem; cursor: pointer;
    background: var(--card); border: 1px solid var(--border); border-radius: 4px;
    color: var(--accent); font-weight: 600;
  }
  .doc-controls button:hover { background: #e7f1ff; }
  .md-body details { margin-bottom: .5rem; }
  .md-body details summary {
    font-weight: 600; cursor: pointer; list-style: none;
  }
  .md-body details summary::-webkit-details-marker { display: none; }
  .md-body details summary::before {
    content: "\25b6"; font-size: .7em; margin-right: .5rem;
    display: inline-block; transition: transform .15s;
  }
  .md-body details[open] summary::before { transform: rotate(90deg); }
  .md-body details.level-2 > summary {
    font-size: 1.25rem; padding-bottom: .25rem;
    border-bottom: 1px solid var(--border); margin: 1.6rem 0 .6rem;
  }
  .md-body details.level-3 > summary {
    font-size: 1.05rem; margin: 1.3rem 0 .5rem;
  }

  footer {
    text-align: center; padding: 1.5rem; font-size: .8rem; color: var(--muted);
    border-top: 1px solid var(--border); margin-top: 2rem;
  }
</style>
</head>
<body>

<style>
  .site-nav {
    position: sticky; top: 0; z-index: 100;
    background: #212529; display: flex; align-items: center;
    padding: 0 2rem; height: 3rem;
  }
  .site-nav .nav-brand {
    color: #fff; text-decoration: none; font-weight: 600; font-size: 1rem;
    margin-right: auto;
  }
  .site-nav .nav-brand:hover { color: #e9ecef; }
  .site-nav .nav-link {
    color: #adb5bd; text-decoration: none; font-size: .85rem;
    padding: 0 .75rem; height: 3rem; display: flex; align-items: center;
    background: none; border: none; cursor: pointer; font-family: inherit;
  }
  .site-nav .nav-link:hover, .site-nav .nav-link.active { color: #fff; }
  .nav-dropdown { position: relative; }
  .dropdown-menu {
    display: none; position: absolute; top: 3rem; right: 0;
    background: #fff; border: 1px solid var(--border); border-radius: 6px;
    box-shadow: 0 4px 16px rgba(0,0,0,.12); min-width: 220px;
    padding: .4rem 0; z-index: 200; max-height: 80vh; overflow-y: auto;
  }
  .nav-dropdown.open .dropdown-menu { display: block; }
  .dropdown-menu a {
    display: block; padding: .3rem 1rem; color: #1a1a1a;
    text-decoration: none; font-size: .82rem;
  }
  .dropdown-menu a:hover { background: #f0f4f8; }
  .dropdown-group-label {
    padding: .4rem 1rem .15rem; font-size: .68rem; font-weight: 700;
    color: #888; text-transform: uppercase; letter-spacing: .04em;
  }
  .dropdown-divider { border-top: 1px solid #eee; margin: .3rem 0; }
  .page-header {
    padding: .8rem 2rem; border-bottom: 1px solid var(--border); background: #fff;
  }
  .page-header h1 { font-size: 1.3rem; font-weight: 600; }
  .page-header p { color: var(--muted); font-size: .85rem; margin-top: .15rem; }
</style>

<nav class="site-nav">
  <a href="../index.html" class="nav-brand">The Binding Force of Law</a>
  <a href="../index.html" class="nav-link">Home</a>
  <a href="../paper/index.html" class="nav-link">Paper</a>
  <div class="nav-dropdown">
    <button class="nav-link">Docs &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Reference</div>
    <a href="../docs/summary.html">Research Summary</a>
    <a href="../docs/institutions.html">Institutional Background</a>
    <a href="../docs/data.html">Data & Extractions</a>
    <a href="../docs/methods.html">Formal Model</a>
    <a href="../docs/literature.html">Literature</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Working notes</div>
    <a href="../docs/thinking.html">Open Questions & Ideas</a>
    <a href="../docs/decisions.html">Key Decisions</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Tasks</div>
    <a href="../docs/todo.html">Active Tasks</a>
    <a href="../docs/done.html">Completed Tasks</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Communication</div>
    <a href="../docs/meetings.html">Meeting Notes</a>
    <a href="../docs/feedback.html">External Feedback</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link">Briefs &#9662;</button>
    <div class="dropdown-menu">
    <a href="../briefs/holding-formalization.html">Decision brief: How to formalize holdings</a>
    <a href="../briefs/paper-status.html">Decision brief: Paper status and path to submission</a>
    </div>
  </div>
  <div class="nav-dropdown">
    <button class="nav-link active">Cases &#9662;</button>
    <div class="dropdown-menu">
    <div class="dropdown-group-label">Equal Protection</div>
    <a href="../cases/carolene_products_1938.html">United States v. Carolene Products Co.</a>
    <a href="../cases/korematsu_1944.html">Korematsu v. United States</a>
    <a href="../cases/brown_v_board_1954.html">Brown v. Board of Education</a>
    <a href="../cases/loving_v_virginia_1967.html">Loving v. Virginia</a>
    <a href="../cases/reed_v_reed_1971.html">Reed v. Reed</a>
    <a href="../cases/craig_v_boren_1976.html">Craig v. Boren</a>
    <a href="../cases/washington_v_davis_1976.html">Washington v. Davis</a>
    <a href="../cases/arlington_heights_1977.html">Village of Arlington Heights v. Metropolitan Housing Development Corp.</a>
    <a href="../cases/feeney_1979.html">Personnel Administrator of Massachusetts v. Feeney</a>
    <a href="../cases/cleburne_1985.html">City of Cleburne v. Cleburne Living Center, Inc.</a>
    <a href="../cases/adarand_1995.html">Adarand Constructors, Inc. v. Pena</a>
    <a href="../cases/romer_v_evans_1996.html">Romer v. Evans</a>
    <a href="../cases/us_v_virginia_vmi_1996.html">United States v. Virginia</a>
    <a href="../cases/grutter_2003.html">Grutter v. Bollinger</a>
    <a href="../cases/parents_involved_2007.html">Parents Involved in Community Schools v. Seattle School District No. 1</a>
    <a href="../cases/fisher_i_2013.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/fisher_ii_2016.html">Fisher v. University of Texas at Austin</a>
    <a href="../cases/sffa_2023.html">Students for Fair Admissions, Inc. v. President and Fellows of Harvard College</a>
    <div class="dropdown-divider"></div>
    <div class="dropdown-group-label">Due Process</div>
    <a href="../cases/lochner_1905.html">Lochner v. New York</a>
    <a href="../cases/griswold_1965.html">Griswold v. Connecticut</a>
    <a href="../cases/roe_v_wade_1973.html">Roe v. Wade</a>
    <a href="../cases/mathews_v_eldridge_1976.html">Mathews v. Eldridge</a>
    <a href="../cases/casey_1992.html">Planned Parenthood of Southeastern Pennsylvania v. Casey</a>
    <a href="../cases/glucksberg_1997.html">Washington v. Glucksberg</a>
    <a href="../cases/dobbs_2022.html">Dobbs v. Jackson Women's Health Organization</a>
    </div>
  </div>
</nav>
<script>
document.querySelectorAll('.nav-dropdown > .nav-link').forEach(function(btn) {
  btn.addEventListener('click', function(e) {
    e.stopPropagation();
    var dd = btn.parentElement;
    var wasOpen = dd.classList.contains('open');
    document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
    if (!wasOpen) dd.classList.add('open');
  });
});
document.addEventListener('click', function() {
  document.querySelectorAll('.nav-dropdown.open').forEach(function(d) { d.classList.remove('open'); });
});
</script>

<div class="page-header">
  <h1>Parents Involved in Community Schools v. Seattle School District No. 1</h1>
</div>

<main>
<div class="doc-controls">
  <button id="toggle-sections">Expand all</button>
</div>
<div class="md-body">
<h1>Parents Involved in Community Schools v. Seattle School District No. 1, 551 U.S. 701 (2007)</h1>
<p><strong>Author:</strong> Roberts (majority)
<strong>Outcome:</strong> Plaintiffs win ($d = 1$: race-based student assignment plans violate EP)
<strong>Concurrences:</strong> Kennedy, Thomas
<strong>Dissents:</strong> Breyer, Stevens</p>
<hr />
<h2 id="1-holding-h-t">1. Holding ($H_t$)</h2>
<blockquote>
<p>&quot;The way to stop discrimination on the basis of race is to stop discriminating on the basis of race.&quot; (p. 748)</p>
</blockquote>
<blockquote>
<p>&quot;The school districts have not carried their heavy burden of showing that the interest they seek to achieve justifies the extreme means they have chosen—discriminating among individual students based on race by relying upon racial classifications in making school assignments.&quot; (p. 702)</p>
</blockquote>
<p><strong>As constraint on admissible $(w, c)$:</strong> The holding rules out any decision rule that allows for the use of explicit racial classifications in student assignment plans unless they are narrowly tailored to achieve a compelling governmental interest. The Court requires strict scrutiny for such classifications, demanding a precise fit between means and ends. The decision rules must not use race as a predominant factor without demonstrating necessity and the absence of race-neutral alternatives.</p>
<p><strong>What the holding does NOT constrain:</strong></p>
<ul>
<li>The use of race-neutral means to achieve diversity or prevent racial isolation.</li>
<li>The use of race in contexts other than K-12 public school assignments, such as higher education admissions (Grutter).</li>
<li>The potential for race to be considered in a more nuanced, individualized manner, as suggested by Justice Kennedy.</li>
</ul>
<hr />
<h2 id="2-fact-vector-z-t">2. Fact vector $z_t$</h2>
<h3 id="2a-raw-salient-facts">2a. Raw salient facts</h3>
<ul>
<li><strong>Racial classification as tiebreaker:</strong> &quot;The Seattle district...classified children as white or nonwhite, and used the racial classifications as a 'tiebreaker' to allocate slots in particular high schools.&quot; (p. 701). Favors: plaintiff.</li>
<li><strong>Jefferson County's racial guidelines:</strong> &quot;The plan requires all nonmagnet schools to maintain a minimum black enrollment of 15 percent, and a maximum black enrollment of 50 percent.&quot; (p. 716). Favors: plaintiff.</li>
<li><strong>Minimal effect of racial classifications:</strong> &quot;The minimal effect these classifications have on student assignments suggests that other means would be effective.&quot; (p. 704). Favors: plaintiff.</li>
<li><strong>Lack of race-neutral alternatives:</strong> &quot;The districts have also failed to show they considered methods other than explicit racial classifications to achieve their stated goals.&quot; (p. 704). Favors: plaintiff.</li>
</ul>
<h3 id="2b-dimension-mapping">2b. Dimension mapping</h3>
<table>
<thead>
<tr>
  <th>Dimension</th>
  <th>Value</th>
  <th>Raw fact(s) mapped</th>
  <th>Textual basis</th>
</tr>
</thead>
<tbody>
<tr>
  <td>D1 Facial classification</td>
  <td>High</td>
  <td>Racial classification as tiebreaker</td>
  <td>&quot;classified children as white or nonwhite&quot; (p. 701)</td>
</tr>
<tr>
  <td>D2 Protected trait</td>
  <td>Race</td>
  <td>Racial classification as tiebreaker</td>
  <td>Throughout</td>
</tr>
<tr>
  <td>D3 Intent evidence</td>
  <td>N/A (facial)</td>
  <td>—</td>
  <td>Classification is explicit; no need to infer intent</td>
</tr>
<tr>
  <td>D4 Interest strength</td>
  <td>Weak</td>
  <td>Minimal effect of racial classifications</td>
  <td>&quot;minimal effect...suggests that other means would be effective&quot; (p. 704)</td>
</tr>
<tr>
  <td>D5 Means-ends fit</td>
  <td>Poor</td>
  <td>Lack of race-neutral alternatives</td>
  <td>&quot;failed to show they considered methods other than explicit racial classifications&quot; (p. 704)</td>
</tr>
<tr>
  <td>D6 Stigma / caste</td>
  <td>High</td>
  <td>Racial classification as tiebreaker</td>
  <td>&quot;discriminating among individual students based on race&quot; (p. 702)</td>
</tr>
<tr>
  <td>D7 Institutional setting</td>
  <td>K-12 education</td>
  <td>Racial classification as tiebreaker</td>
  <td>&quot;in making school assignments&quot; (p. 702)</td>
</tr>
<tr>
  <td>D8 Precedent density</td>
  <td>High conflict</td>
  <td>—</td>
  <td>Contradicts prior cases allowing race-conscious measures (e.g., Swann)</td>
</tr>
</tbody>
</table>
<p><strong>Unmapped facts:</strong></p>
<ul>
<li>The specific demographic targets (e.g., 15-50% black enrollment) do not map cleanly to existing dimensions but reflect an operationalization of racial balance goals.</li>
</ul>
<p><strong>Notable:</strong> The Court emphasizes the minimal impact of racial classifications on actual student assignments, suggesting that the weight on D4 (interest strength) is low, undermining the justification for using race.</p>
<hr />
<h2 id="3-treatment-of-prior-holdings-mathcal-f-t-update">3. Treatment of prior holdings ($\mathcal{F}_t$ update)</h2>
<h3 id="grutter-v-bollinger-2003">Grutter v. Bollinger (2003)</h3>
<ul>
<li><strong>Status:</strong> Distinguished. &quot;The present cases are not governed by Grutter.&quot; (p. 725).</li>
<li><strong>Characterization:</strong> Grutter involved a &quot;far broader array of qualifications and characteristics&quot; in higher education, not applicable to K-12 settings.</li>
<li><strong>Model interpretation:</strong> Limits the applicability of Grutter's diversity rationale to higher education, not extending it to K-12.</li>
</ul>
<h3 id="swann-v-charlotte-mecklenburg-bd-of-ed-1971">Swann v. Charlotte-Mecklenburg Bd. of Ed. (1971)</h3>
<ul>
<li><strong>Status:</strong> Limited. The Court acknowledges Swann's allowance for race-conscious measures but confines it to remedial contexts.</li>
<li><strong>Characterization:</strong> Swann addressed court-ordered desegregation, not voluntary plans without a finding of de jure segregation.</li>
<li><strong>Model interpretation:</strong> Narrows the scope of Swann to exclude voluntary race-conscious plans without a judicial finding of past discrimination.</li>
</ul>
<hr />
<h2 id="4-overruling-constraint-removal-at-cost-c">4. Overruling (constraint removal at cost $C$)</h2>
<p><strong>What is removed:</strong> The permissibility of using racial classifications in K-12 student assignments without a compelling interest and narrow tailoring.</p>
<p><strong>Justification (mapping to stare decisis factors):</strong></p>
<ul>
<li><em>Quality of reasoning:</em> The Court finds the districts' justifications insufficient under strict scrutiny.</li>
<li><em>Workability:</em> The plans' minimal impact suggests ineffectiveness.</li>
<li><em>Consistency with related doctrine:</em> Aligns with Adarand's strict scrutiny requirement for racial classifications.</li>
<li><em>Reliance interests:</em> Not addressed explicitly, but the decision disrupts longstanding practices.</li>
<li><em>Changed facts:</em> Emphasizes the lack of necessity given demographic changes and alternative means.</li>
</ul>
<p><strong>Institutional cost:</strong> The decision signals a shift away from race-conscious measures in K-12 education, potentially increasing litigation and requiring districts to explore race-neutral alternatives.</p>
<hr />
<h2 id="5-breadth">5. Breadth</h2>
<p><strong>Narrow reading (what the Court explicitly holds):</strong></p>
<ul>
<li>Racial classifications in K-12 student assignments are unconstitutional unless narrowly tailored to a compelling interest.</li>
<li>Limited to K-12 education: does not address higher education or other contexts.</li>
</ul>
<p><strong>Broad reading (what the reasoning supports):</strong></p>
<ul>
<li>Suggests skepticism towards any use of race in government decision-making without clear necessity and narrow tailoring.</li>
<li>Could extend to other areas where race is used as a criterion.</li>
</ul>
<p><strong>Breadth ambiguity:</strong> The decision leaves open the possibility of considering race in more nuanced ways, as suggested by Justice Kennedy, creating ambiguity about the permissible scope of race-conscious measures.</p>
<hr />
<h2 id="6-concurrences-dissents-alternative-admissible-theories">6. Concurrences / dissents (alternative admissible theories)</h2>
<h3 id="justice-kennedy-concurring-in-part-and-concurring-in-judgment">Justice Kennedy (concurring in part and concurring in judgment)</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Supports the use of race-conscious measures in a more nuanced, individualized manner, not as a predominant factor.</li>
<li><strong>Key disagreement:</strong> Disagrees with the plurality's categorical rejection of race-conscious measures; emphasizes the importance of diversity and avoiding racial isolation.</li>
</ul>
<h3 id="justice-thomas-concurring">Justice Thomas (concurring)</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Advocates for a colorblind Constitution, rejecting any use of race in government decision-making.</li>
<li><strong>Key disagreement:</strong> Disagrees with any consideration of race, emphasizing historical harms of racial classifications.</li>
</ul>
<h3 id="justice-breyer-dissenting">Justice Breyer (dissenting)</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Supports the use of race-conscious measures to achieve integration and diversity, viewing them as consistent with Brown and subsequent cases.</li>
<li><strong>Key disagreement:</strong> Disagrees with the majority's strict scrutiny application, emphasizing the compelling interests served by integration efforts.</li>
</ul>
<h3 id="justice-stevens-dissenting">Justice Stevens (dissenting)</h3>
<ul>
<li><strong>Alternative constraint structure:</strong> Criticizes the majority for misinterpreting Brown and undermining efforts to achieve racial integration.</li>
<li><strong>Key disagreement:</strong> Emphasizes the historical context and importance of race-conscious measures in achieving equality.</li>
</ul>
<hr />
<h2 id="7-reasoning-revealing-implicit-weights-on-dimensions">7. Reasoning revealing implicit weights on dimensions</h2>
<p><strong>Minimal effect of racial classifications (D4 weight is low):</strong></p>
<blockquote>
<p>&quot;The minimal effect these classifications have on student assignments suggests that other means would be effective.&quot; (p. 704)</p>
</blockquote>
<p>The Court signals that the weight on D4 (interest strength) is low, undermining the justification for using race.</p>
<p><strong>Strict scrutiny requirement (D5 weight is high):</strong></p>
<blockquote>
<p>&quot;The school districts have not carried their heavy burden of showing that the interest they seek to achieve justifies the extreme means they have chosen.&quot; (p. 702)</p>
</blockquote>
<p>Emphasizes the high weight on D5 (means-ends fit), requiring precise tailoring and necessity.</p>
<p><strong>Historical context and stigma (D6 weight is high):</strong></p>
<blockquote>
<p>&quot;The way to stop discrimination on the basis of race is to stop discriminating on the basis of race.&quot; (p. 748)</p>
</blockquote>
<p>Highlights the high weight on D6 (stigma/caste), viewing racial classifications as inherently suspect and divisive.</p>

</div>
</main>

<footer>
  Generated by <code>python3 -m source.site.build_all</code>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const body = document.querySelector('.md-body');
  if (!body) return;

  function foldHeadings(container, tag) {
    const level = tag.replace('H', '');
    const headings = Array.from(container.querySelectorAll(':scope > ' + tag.toLowerCase()));
    headings.forEach(h => {
      const details = document.createElement('details');
      details.className = 'level-' + level;
      if (h.id) details.id = h.id;
      const summary = document.createElement('summary');
      summary.innerHTML = h.innerHTML;
      details.appendChild(summary);
      let sibling = h.nextElementSibling;
      const collected = [];
      while (sibling && sibling.tagName !== tag) {
        collected.push(sibling);
        sibling = sibling.nextElementSibling;
      }
      collected.forEach(el => details.appendChild(el));
      h.replaceWith(details);
    });
    return headings.length;
  }

  // Fold h2 sections, then h3 sections within each h2
  const count = foldHeadings(body, 'H2');
  if (count === 0) {
    document.querySelector('.doc-controls').style.display = 'none';
    return;
  }
  body.querySelectorAll('details.level-2').forEach(d => foldHeadings(d, 'H3'));

  // Toggle button
  const btn = document.getElementById('toggle-sections');
  if (!btn) return;
  btn.addEventListener('click', () => {
    const allDetails = body.querySelectorAll('details');
    const expanding = btn.textContent === 'Expand all';
    allDetails.forEach(d => d.open = expanding);
    btn.textContent = expanding ? 'Collapse all' : 'Expand all';
  });

  // Auto-open details when navigating to an anchor
  function openAnchorTarget() {
    if (!location.hash) return;
    const target = document.querySelector(location.hash);
    if (!target) return;
    let el = target;
    while (el) {
      if (el.tagName === 'DETAILS') el.open = true;
      el = el.parentElement;
    }
    target.scrollIntoView();
  }
  openAnchorTarget();
  window.addEventListener('hashchange', openAnchorTarget);
});
</script>

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/contrib/auto-render.min.js"
  onload="renderMathInElement(document.querySelector('.md-body'), {
    delimiters: [
      {left: '$$', right: '$$', display: true},
      {left: '$', right: '$', display: false}
    ],
    throwOnError: false
  });"></script>
</body>
</html>
